var dt=Object.defineProperty;var pt=(a,s)=>{for(var l in s)dt(a,l,{get:s[l],enumerable:!0})};function Z(a){let s=atob(a),l=s.length,n=new Uint8Array(l);for(let r=0;r<l;r++)n[r]=s.charCodeAt(r);return n}function G(a){typeof a=="string"&&(a=new TextEncoder().encode(a));let s="",l=a.byteLength;for(let n=0;n<l;n++)s+=String.fromCharCode(a[n]);return btoa(s)}var te=new Uint8Array(16);var $=class{constructor(s="",l=1e3){this.prefix=s;this.maxCaptureSize=l;this.prefix=s,this.originalConsole={log:console.log.bind(console),info:console.info.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),debug:console.debug.bind(console)},this.patchConsole()}originalConsole;logBuffer=[];patchConsole(){let s=l=>(...n)=>{let r=this.prefix?[this.prefix,...n]:n;this.originalConsole[l](...r),this.captureLog(l,n)};console.log=s("log"),console.info=s("info"),console.warn=s("warn"),console.error=s("error"),console.debug=s("debug")}captureLog(s,l){let n={level:s,timestamp:Date.now(),message:l.map(r=>{if(typeof r=="string")return r;try{return JSON.stringify(r)}catch{return String(r)}}).join(" ")};this.logBuffer.push(n),this.logBuffer.length>this.maxCaptureSize&&this.logBuffer.shift()}async postToServer(s,l){if(this.logBuffer.length>0){let r=[...this.logBuffer];this.logBuffer=[];try{if(!(await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r.map(e=>({...e,source:l})))})).ok)throw new Error("Failed to post logs to server")}catch(d){console.warn("Could not post logs to server",d.message),this.logBuffer.unshift(...r)}}}},z;function tt(a=""){return z=new $(a),z}var I=a=>{throw new Error("Not initialized yet")},J=typeof window>"u"&&typeof globalThis.WebSocketPair>"u";typeof Deno>"u"&&(self.Deno={args:[],build:{arch:"x86_64"},env:{get(){}}});var V=new Map,W=0;J&&(globalThis.syscall=async(a,...s)=>await new Promise((l,n)=>{W++,V.set(W,{resolve:l,reject:n}),I({type:"sys",id:W,name:a,args:s})}));function et(a,s,l){J&&(I=l,self.addEventListener("message",n=>{(async()=>{let r=n.data;switch(r.type){case"inv":{let d=a[r.name];if(!d)throw new Error(`Function not loaded: ${r.name}`);try{let e=await Promise.resolve(d(...r.args||[]));I({type:"invr",id:r.id,result:e})}catch(e){console.error("An exception was thrown as a result of invoking function",r.name,"error:",e.message),I({type:"invr",id:r.id,error:e.message})}}break;case"sysr":{let d=r.id,e=V.get(d);if(!e)throw Error("Invalid request id");V.delete(d),r.error?e.reject(new Error(r.error)):e.resolve(r.result)}break}})().catch(console.error)}),I({type:"manifest",manifest:s}),tt(`[${s.name} plug]`))}async function gt(a,s){if(typeof a!="string"){let l=new Uint8Array(await a.arrayBuffer()),n=l.length>0?G(l):void 0;s={method:a.method,headers:Object.fromEntries(a.headers.entries()),base64Body:n},a=a.url}return syscall("sandboxFetch.fetch",a,s)}globalThis.nativeFetch=globalThis.fetch;function yt(){globalThis.fetch=async function(a,s){let l=s&&s.body?G(new Uint8Array(await new Response(s.body).arrayBuffer())):void 0,n=await gt(a,s&&{method:s.method,headers:s.headers,base64Body:l});return new Response(n.base64Body?Z(n.base64Body):null,{status:n.status,headers:n.headers})}}J&&yt();var N=function(a,s){let r=a,d=j[s],e=null,t=0,p=null,h=[],x={},y=function(i,f){t=r*4+17,e=function(o){let u=new Array(o);for(let c=0;c<o;c+=1){u[c]=new Array(o);for(let m=0;m<o;m+=1)u[c][m]=null}return u}(t),g(0,0),g(t-7,0),g(0,t-7),B(),_(),S(i,f),r>=7&&D(i),p==null&&(p=ft(r,d,h)),L(p,f)},g=function(i,f){for(let o=-1;o<=7;o+=1)if(!(i+o<=-1||t<=i+o))for(let u=-1;u<=7;u+=1)f+u<=-1||t<=f+u||(0<=o&&o<=6&&(u==0||u==6)||0<=u&&u<=6&&(o==0||o==6)||2<=o&&o<=4&&2<=u&&u<=4?e[i+o][f+u]=!0:e[i+o][f+u]=!1)},b=function(){let i=0,f=0;for(let o=0;o<8;o+=1){y(!0,o);let u=U.getLostPoint(x);(o==0||i>u)&&(i=u,f=o)}return f},_=function(){for(let i=8;i<t-8;i+=1)e[i][6]==null&&(e[i][6]=i%2==0);for(let i=8;i<t-8;i+=1)e[6][i]==null&&(e[6][i]=i%2==0)},B=function(){let i=U.getPatternPosition(r);for(let f=0;f<i.length;f+=1)for(let o=0;o<i.length;o+=1){let u=i[f],c=i[o];if(e[u][c]==null)for(let m=-2;m<=2;m+=1)for(let P=-2;P<=2;P+=1)m==-2||m==2||P==-2||P==2||m==0&&P==0?e[u+m][c+P]=!0:e[u+m][c+P]=!1}},D=function(i){let f=U.getBCHTypeNumber(r);for(let o=0;o<18;o+=1){let u=!i&&(f>>o&1)==1;e[Math.floor(o/3)][o%3+t-8-3]=u}for(let o=0;o<18;o+=1){let u=!i&&(f>>o&1)==1;e[o%3+t-8-3][Math.floor(o/3)]=u}},S=function(i,f){let o=d<<3|f,u=U.getBCHTypeInfo(o);for(let c=0;c<15;c+=1){let m=!i&&(u>>c&1)==1;c<6?e[c][8]=m:c<8?e[c+1][8]=m:e[t-15+c][8]=m}for(let c=0;c<15;c+=1){let m=!i&&(u>>c&1)==1;c<8?e[8][t-c-1]=m:c<9?e[8][15-c-1+1]=m:e[8][15-c-1]=m}e[t-8][8]=!i},L=function(i,f){let o=-1,u=t-1,c=7,m=0,P=U.getMaskFunction(f);for(let C=t-1;C>0;C-=2)for(C==6&&(C-=1);;){for(let v=0;v<2;v+=1)if(e[u][C-v]==null){let T=!1;m<i.length&&(T=(i[m]>>>c&1)==1),P(u,C-v)&&(T=!T),e[u][C-v]=T,c-=1,c==-1&&(m+=1,c=7)}if(u+=o,u<0||t<=u){u-=o,o=-o;break}}},ut=function(i,f){let o=0,u=0,c=0,m=new Array(f.length),P=new Array(f.length);for(let w=0;w<f.length;w+=1){let M=f[w].dataCount,k=f[w].totalCount-M;u=Math.max(u,M),c=Math.max(c,k),m[w]=new Array(M);for(let R=0;R<m[w].length;R+=1)m[w][R]=255&i.getBuffer()[R+o];o+=M;let q=U.getErrorCorrectPolynomial(k),Y=Q(m[w],q.getLength()-1).mod(q);P[w]=new Array(q.getLength()-1);for(let R=0;R<P[w].length;R+=1){let X=R+Y.getLength()-P[w].length;P[w][R]=X>=0?Y.getAt(X):0}}let C=0;for(let w=0;w<f.length;w+=1)C+=f[w].totalCount;let v=new Array(C),T=0;for(let w=0;w<u;w+=1)for(let M=0;M<f.length;M+=1)w<m[M].length&&(v[T]=m[M][w],T+=1);for(let w=0;w<c;w+=1)for(let M=0;M<f.length;M+=1)w<P[M].length&&(v[T]=P[M][w],T+=1);return v},ft=function(i,f,o){let u=rt.getRSBlocks(i,f),c=nt();for(let P=0;P<o.length;P+=1){let C=o[P];c.put(C.getMode(),4),c.put(C.getLength(),U.getLengthInBits(C.getMode(),i)),C.write(c)}let m=0;for(let P=0;P<u.length;P+=1)m+=u[P].dataCount;if(c.getLengthInBits()>m*8)throw"code length overflow. ("+c.getLengthInBits()+">"+m*8+")";for(c.getLengthInBits()+4<=m*8&&c.put(0,4);c.getLengthInBits()%8!=0;)c.putBit(!1);for(;!(c.getLengthInBits()>=m*8||(c.put(236,8),c.getLengthInBits()>=m*8));)c.put(17,8);return ut(c,u)};x.addData=function(i,f){f=f||"Byte";let o=null;switch(f){case"Numeric":o=mt(i);break;case"Alphanumeric":o=ht(i);break;case"Byte":o=xt(i);break;case"Kanji":o=Pt(i);break;default:throw"mode:"+f}h.push(o),p=null},x.isDark=function(i,f){if(i<0||t<=i||f<0||t<=f)throw i+","+f;return e[i][f]},x.getModuleCount=function(){return t},x.make=function(){if(r<1){let i=1;for(;i<40;i++){let f=rt.getRSBlocks(i,d),o=nt();for(let c=0;c<h.length;c++){let m=h[c];o.put(m.getMode(),4),o.put(m.getLength(),U.getLengthInBits(m.getMode(),i)),m.write(o)}let u=0;for(let c=0;c<f.length;c++)u+=f[c].dataCount;if(o.getLengthInBits()<=u*8)break}r=i}y(!1,b())},x.createTableTag=function(i,f){i=i||2,f=typeof f>"u"?i*4:f;let o="";o+='<table style="',o+=" border-width: 0px; border-style: none;",o+=" border-collapse: collapse;",o+=" padding: 0px; margin: "+f+"px;",o+='">',o+="<tbody>";for(let u=0;u<x.getModuleCount();u+=1){o+="<tr>";for(let c=0;c<x.getModuleCount();c+=1)o+='<td style="',o+=" border-width: 0px; border-style: none;",o+=" border-collapse: collapse;",o+=" padding: 0px; margin: 0px;",o+=" width: "+i+"px;",o+=" height: "+i+"px;",o+=" background-color: ",o+=x.isDark(u,c)?"#000000":"#ffffff",o+=";",o+='"/>';o+="</tr>"}return o+="</tbody>",o+="</table>",o},x.createSvgTag=function(i,f,o,u){let c={};typeof arguments[0]=="object"&&(c=arguments[0],i=c.cellSize,f=c.margin,o=c.alt,u=c.title),i=i||2,f=typeof f>"u"?i*4:f,o=typeof o=="string"?{text:o}:o||{},o.text=o.text||null,o.id=o.text?o.id||"qrcode-description":null,u=typeof u=="string"?{text:u}:u||{},u.text=u.text||null,u.id=u.text?u.id||"qrcode-title":null;let m=x.getModuleCount()*i+f*2,P,C,v,T,w="",M;for(M="l"+i+",0 0,"+i+" -"+i+",0 0,-"+i+"z ",w+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',w+=c.scalable?"":' width="'+m+'px" height="'+m+'px"',w+=' viewBox="0 0 '+m+" "+m+'" ',w+=' preserveAspectRatio="xMinYMin meet"',w+=u.text||o.text?' role="img" aria-labelledby="'+O([u.id,o.id].join(" ").trim())+'"':"",w+=">",w+=u.text?'<title id="'+O(u.id)+'">'+O(u.text)+"</title>":"",w+=o.text?'<description id="'+O(o.id)+'">'+O(o.text)+"</description>":"",w+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',w+='<path d="',v=0;v<x.getModuleCount();v+=1)for(T=v*i+f,P=0;P<x.getModuleCount();P+=1)x.isDark(v,P)&&(C=P*i+f,w+="M"+C+","+T+M);return w+='" stroke="transparent" fill="black"/>',w+="</svg>",w},x.createDataURL=function(i,f){i=i||2,f=typeof f>"u"?i*4:f;let o=x.getModuleCount()*i+f*2,u=f,c=o-f;return At(o,o,function(m,P){if(u<=m&&m<c&&u<=P&&P<c){let C=Math.floor((m-u)/i),v=Math.floor((P-u)/i);return x.isDark(v,C)?0:1}else return 1})},x.createImgTag=function(i,f,o){i=i||2,f=typeof f>"u"?i*4:f;let u=x.getModuleCount()*i+f*2,c="";return c+="<img",c+=' src="',c+=x.createDataURL(i,f),c+='"',c+=' width="',c+=u,c+='"',c+=' height="',c+=u,c+='"',o&&(c+=' alt="',c+=O(o),c+='"'),c+="/>",c};let O=function(i){let f="";for(let o=0;o<i.length;o+=1){let u=i.charAt(o);switch(u){case"<":f+="&lt;";break;case">":f+="&gt;";break;case"&":f+="&amp;";break;case'"':f+="&quot;";break;default:f+=u;break}}return f},lt=function(i){i=typeof i>"u"?1*2:i;let o=x.getModuleCount()*1+i*2,u=i,c=o-i,m,P,C,v,T,w={"\u2588\u2588":"\u2588","\u2588 ":"\u2580"," \u2588":"\u2584","  ":" "},M={"\u2588\u2588":"\u2580","\u2588 ":"\u2580"," \u2588":" ","  ":" "},k="";for(m=0;m<o;m+=2){for(C=Math.floor((m-u)/1),v=Math.floor((m+1-u)/1),P=0;P<o;P+=1)T="\u2588",u<=P&&P<c&&u<=m&&m<c&&x.isDark(C,Math.floor((P-u)/1))&&(T=" "),u<=P&&P<c&&u<=m+1&&m+1<c&&x.isDark(v,Math.floor((P-u)/1))?T+=" ":T+="\u2588",k+=i<1&&m+1>=c?M[T]:w[T];k+=`
`}return o%2&&i>0?k.substring(0,k.length-o-1)+Array(o+1).join("\u2580"):k.substring(0,k.length-1)};return x.createASCII=function(i,f){if(i=i||1,i<2)return lt(f);i-=1,f=typeof f>"u"?i*2:f;let o=x.getModuleCount()*i+f*2,u=f,c=o-f,m,P,C,v,T=Array(i+1).join("\u2588\u2588"),w=Array(i+1).join("  "),M="",k="";for(m=0;m<o;m+=1){for(C=Math.floor((m-u)/i),k="",P=0;P<o;P+=1)v=1,u<=P&&P<c&&u<=m&&m<c&&x.isDark(C,Math.floor((P-u)/i))&&(v=0),k+=v?T:w;for(C=0;C<i;C+=1)M+=k+`
`}return M.substring(0,M.length-1)},x.renderTo2dContext=function(i,f){f=f||2;let o=x.getModuleCount();for(let u=0;u<o;u++)for(let c=0;c<o;c++)i.fillStyle=x.isDark(u,c)?"black":"white",i.fillRect(c*f,u*f,f,f)},x};N.stringToBytes=function(a){let s=[];for(let l=0;l<a.length;l+=1){let n=a.charCodeAt(l);s.push(n&255)}return s};N.createStringToBytes=function(a,s){let l=function(){let r=bt(a),d=function(){let p=r.read();if(p==-1)throw"eof";return p},e=0,t={};for(;;){let p=r.read();if(p==-1)break;let h=d(),x=d(),y=d(),g=String.fromCharCode(p<<8|h),b=x<<8|y;t[g]=b,e+=1}if(e!=s)throw e+" != "+s;return t}(),n=63;return function(r){let d=[];for(let e=0;e<r.length;e+=1){let t=r.charCodeAt(e);if(t<128)d.push(t);else{let p=l[r.charAt(e)];typeof p=="number"?(p&255)==p?d.push(p):(d.push(p>>>8),d.push(p&255)):d.push(n)}}return d}};var E={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},j={L:1,M:0,Q:3,H:2},K={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},U=function(){let a=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],s=1335,l=7973,n=21522,r={},d=function(e){let t=0;for(;e!=0;)t+=1,e>>>=1;return t};return r.getBCHTypeInfo=function(e){let t=e<<10;for(;d(t)-d(s)>=0;)t^=s<<d(t)-d(s);return(e<<10|t)^n},r.getBCHTypeNumber=function(e){let t=e<<12;for(;d(t)-d(l)>=0;)t^=l<<d(t)-d(l);return e<<12|t},r.getPatternPosition=function(e){return a[e-1]},r.getMaskFunction=function(e){switch(e){case K.PATTERN000:return function(t,p){return(t+p)%2==0};case K.PATTERN001:return function(t,p){return t%2==0};case K.PATTERN010:return function(t,p){return p%3==0};case K.PATTERN011:return function(t,p){return(t+p)%3==0};case K.PATTERN100:return function(t,p){return(Math.floor(t/2)+Math.floor(p/3))%2==0};case K.PATTERN101:return function(t,p){return t*p%2+t*p%3==0};case K.PATTERN110:return function(t,p){return(t*p%2+t*p%3)%2==0};case K.PATTERN111:return function(t,p){return(t*p%3+(t+p)%2)%2==0};default:throw"bad maskPattern:"+e}},r.getErrorCorrectPolynomial=function(e){let t=Q([1],0);for(let p=0;p<e;p+=1)t=t.multiply(Q([1,F.gexp(p)],0));return t},r.getLengthInBits=function(e,t){if(1<=t&&t<10)switch(e){case E.MODE_NUMBER:return 10;case E.MODE_ALPHA_NUM:return 9;case E.MODE_8BIT_BYTE:return 8;case E.MODE_KANJI:return 8;default:throw"mode:"+e}else if(t<27)switch(e){case E.MODE_NUMBER:return 12;case E.MODE_ALPHA_NUM:return 11;case E.MODE_8BIT_BYTE:return 16;case E.MODE_KANJI:return 10;default:throw"mode:"+e}else if(t<41)switch(e){case E.MODE_NUMBER:return 14;case E.MODE_ALPHA_NUM:return 13;case E.MODE_8BIT_BYTE:return 16;case E.MODE_KANJI:return 12;default:throw"mode:"+e}else throw"type:"+t},r.getLostPoint=function(e){let t=e.getModuleCount(),p=0;for(let y=0;y<t;y+=1)for(let g=0;g<t;g+=1){let b=0,_=e.isDark(y,g);for(let B=-1;B<=1;B+=1)if(!(y+B<0||t<=y+B))for(let D=-1;D<=1;D+=1)g+D<0||t<=g+D||B==0&&D==0||_==e.isDark(y+B,g+D)&&(b+=1);b>5&&(p+=3+b-5)}for(let y=0;y<t-1;y+=1)for(let g=0;g<t-1;g+=1){let b=0;e.isDark(y,g)&&(b+=1),e.isDark(y+1,g)&&(b+=1),e.isDark(y,g+1)&&(b+=1),e.isDark(y+1,g+1)&&(b+=1),(b==0||b==4)&&(p+=3)}for(let y=0;y<t;y+=1)for(let g=0;g<t-6;g+=1)e.isDark(y,g)&&!e.isDark(y,g+1)&&e.isDark(y,g+2)&&e.isDark(y,g+3)&&e.isDark(y,g+4)&&!e.isDark(y,g+5)&&e.isDark(y,g+6)&&(p+=40);for(let y=0;y<t;y+=1)for(let g=0;g<t-6;g+=1)e.isDark(g,y)&&!e.isDark(g+1,y)&&e.isDark(g+2,y)&&e.isDark(g+3,y)&&e.isDark(g+4,y)&&!e.isDark(g+5,y)&&e.isDark(g+6,y)&&(p+=40);let h=0;for(let y=0;y<t;y+=1)for(let g=0;g<t;g+=1)e.isDark(g,y)&&(h+=1);let x=Math.abs(100*h/t/t-50)/5;return p+=x*10,p},r}(),F=function(){let a=new Array(256),s=new Array(256);for(let n=0;n<8;n+=1)a[n]=1<<n;for(let n=8;n<256;n+=1)a[n]=a[n-4]^a[n-5]^a[n-6]^a[n-8];for(let n=0;n<255;n+=1)s[a[n]]=n;let l={};return l.glog=function(n){if(n<1)throw"glog("+n+")";return s[n]},l.gexp=function(n){for(;n<0;)n+=255;for(;n>=256;)n-=255;return a[n]},l}(),Q=function(a,s){if(typeof a.length>"u")throw a.length+"/"+s;let l=function(){let r=0;for(;r<a.length&&a[r]==0;)r+=1;let d=new Array(a.length-r+s);for(let e=0;e<a.length-r;e+=1)d[e]=a[e+r];return d}(),n={};return n.getAt=function(r){return l[r]},n.getLength=function(){return l.length},n.multiply=function(r){let d=new Array(n.getLength()+r.getLength()-1);for(let e=0;e<n.getLength();e+=1)for(let t=0;t<r.getLength();t+=1)d[e+t]^=F.gexp(F.glog(n.getAt(e))+F.glog(r.getAt(t)));return Q(d,0)},n.mod=function(r){if(n.getLength()-r.getLength()<0)return n;let d=F.glog(n.getAt(0))-F.glog(r.getAt(0)),e=new Array(n.getLength());for(let t=0;t<n.getLength();t+=1)e[t]=n.getAt(t);for(let t=0;t<r.getLength();t+=1)e[t]^=F.gexp(F.glog(r.getAt(t))+d);return Q(e,0).mod(r)},n},rt=function(){let a=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],s=function(r,d){let e={};return e.totalCount=r,e.dataCount=d,e},l={},n=function(r,d){switch(d){case j.L:return a[(r-1)*4+0];case j.M:return a[(r-1)*4+1];case j.Q:return a[(r-1)*4+2];case j.H:return a[(r-1)*4+3];default:return}};return l.getRSBlocks=function(r,d){let e=n(r,d);if(typeof e>"u")throw"bad rs block @ typeNumber:"+r+"/errorCorrectionLevel:"+d;let t=e.length/3,p=[];for(let h=0;h<t;h+=1){let x=e[h*3+0],y=e[h*3+1],g=e[h*3+2];for(let b=0;b<x;b+=1)p.push(s(y,g))}return p},l}(),nt=function(){let a=[],s=0,l={};return l.getBuffer=function(){return a},l.getAt=function(n){let r=Math.floor(n/8);return(a[r]>>>7-n%8&1)==1},l.put=function(n,r){for(let d=0;d<r;d+=1)l.putBit((n>>>r-d-1&1)==1)},l.getLengthInBits=function(){return s},l.putBit=function(n){let r=Math.floor(s/8);a.length<=r&&a.push(0),n&&(a[r]|=128>>>s%8),s+=1},l},mt=function(a){let s=E.MODE_NUMBER,l=a,n={};n.getMode=function(){return s},n.getLength=function(e){return l.length},n.write=function(e){let t=l,p=0;for(;p+2<t.length;)e.put(r(t.substring(p,p+3)),10),p+=3;p<t.length&&(t.length-p==1?e.put(r(t.substring(p,p+1)),4):t.length-p==2&&e.put(r(t.substring(p,p+2)),7))};let r=function(e){let t=0;for(let p=0;p<e.length;p+=1)t=t*10+d(e.charAt(p));return t},d=function(e){if("0"<=e&&e<="9")return e.charCodeAt(0)-48;throw"illegal char :"+e};return n},ht=function(a){let s=E.MODE_ALPHA_NUM,l=a,n={};n.getMode=function(){return s},n.getLength=function(d){return l.length},n.write=function(d){let e=l,t=0;for(;t+1<e.length;)d.put(r(e.charAt(t))*45+r(e.charAt(t+1)),11),t+=2;t<e.length&&d.put(r(e.charAt(t)),6)};let r=function(d){if("0"<=d&&d<="9")return d.charCodeAt(0)-48;if("A"<=d&&d<="Z")return d.charCodeAt(0)-65+10;switch(d){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+d}};return n},xt=function(a){let s=E.MODE_8BIT_BYTE,l=a,n=N.stringToBytes(a),r={};return r.getMode=function(){return s},r.getLength=function(d){return n.length},r.write=function(d){for(let e=0;e<n.length;e+=1)d.put(n[e],8)},r},Pt=function(a){let s=E.MODE_KANJI,l=a,n=N.stringToBytes;(function(e,t){let p=n(e);if(p.length!=2||(p[0]<<8|p[1])!=t)throw"sjis not supported."})("\u53CB",38726);let r=n(a),d={};return d.getMode=function(){return s},d.getLength=function(e){return~~(r.length/2)},d.write=function(e){let t=r,p=0;for(;p+1<t.length;){let h=(255&t[p])<<8|255&t[p+1];if(33088<=h&&h<=40956)h-=33088;else if(57408<=h&&h<=60351)h-=49472;else throw"illegal char at "+(p+1)+"/"+h;h=(h>>>8&255)*192+(h&255),e.put(h,13),p+=2}if(p<t.length)throw"illegal char at "+(p+1)},d},ot=function(){let a=[],s={};return s.writeByte=function(l){a.push(l&255)},s.writeShort=function(l){s.writeByte(l),s.writeByte(l>>>8)},s.writeBytes=function(l,n,r){n=n||0,r=r||l.length;for(let d=0;d<r;d+=1)s.writeByte(l[d+n])},s.writeString=function(l){for(let n=0;n<l.length;n+=1)s.writeByte(l.charCodeAt(n))},s.toByteArray=function(){return a},s.toString=function(){let l="";l+="[";for(let n=0;n<a.length;n+=1)n>0&&(l+=","),l+=a[n];return l+="]",l},s},wt=function(){let a=0,s=0,l=0,n="",r={},d=function(t){n+=String.fromCharCode(e(t&63))},e=function(t){if(t<0)throw"n:"+t;if(t<26)return 65+t;if(t<52)return 97+(t-26);if(t<62)return 48+(t-52);if(t==62)return 43;if(t==63)return 47;throw"n:"+t};return r.writeByte=function(t){for(a=a<<8|t&255,s+=8,l+=1;s>=6;)d(a>>>s-6),s-=6},r.flush=function(){if(s>0&&(d(a<<6-s),a=0,s=0),l%3!=0){let t=3-l%3;for(let p=0;p<t;p+=1)n+="="}},r.toString=function(){return n},r},bt=function(a){let s=a,l=0,n=0,r=0,d={};d.read=function(){for(;r<8;){if(l>=s.length){if(r==0)return-1;throw"unexpected end of file./"+r}let p=s.charAt(l);if(l+=1,p=="=")return r=0,-1;if(p.match(/^\s$/))continue;n=n<<6|e(p.charCodeAt(0)),r+=6}let t=n>>>r-8&255;return r-=8,t};let e=function(t){if(65<=t&&t<=90)return t-65;if(97<=t&&t<=122)return t-97+26;if(48<=t&&t<=57)return t-48+52;if(t==43)return 62;if(t==47)return 63;throw"c:"+t};return d},Ct=function(a,s){let l=a,n=s,r=new Array(a*s),d={};d.setPixel=function(h,x,y){r[x*l+h]=y},d.write=function(h){h.writeString("GIF87a"),h.writeShort(l),h.writeShort(n),h.writeByte(128),h.writeByte(0),h.writeByte(0),h.writeByte(0),h.writeByte(0),h.writeByte(0),h.writeByte(255),h.writeByte(255),h.writeByte(255),h.writeString(","),h.writeShort(0),h.writeShort(0),h.writeShort(l),h.writeShort(n),h.writeByte(0);let x=2,y=t(x);h.writeByte(x);let g=0;for(;y.length-g>255;)h.writeByte(255),h.writeBytes(y,g,255),g+=255;h.writeByte(y.length-g),h.writeBytes(y,g,y.length-g),h.writeByte(0),h.writeString(";")};let e=function(h){let x=h,y=0,g=0,b={};return b.write=function(_,B){if(_>>>B)throw"length over";for(;y+B>=8;)x.writeByte(255&(_<<y|g)),B-=8-y,_>>>=8-y,g=0,y=0;g=_<<y|g,y=y+B},b.flush=function(){y>0&&x.writeByte(g)},b},t=function(h){let x=1<<h,y=(1<<h)+1,g=h+1,b=p();for(let L=0;L<x;L+=1)b.add(String.fromCharCode(L));b.add(String.fromCharCode(x)),b.add(String.fromCharCode(y));let _=ot(),B=e(_);B.write(x,g);let D=0,S=String.fromCharCode(r[D]);for(D+=1;D<r.length;){let L=String.fromCharCode(r[D]);D+=1,b.contains(S+L)?S=S+L:(B.write(b.indexOf(S),g),b.size()<4095&&(b.size()==1<<g&&(g+=1),b.add(S+L)),S=L)}return B.write(b.indexOf(S),g),B.write(y,g),B.flush(),_.toByteArray()},p=function(){let h={},x=0,y={};return y.add=function(g){if(y.contains(g))throw"dup key:"+g;h[g]=x,x+=1},y.size=function(){return x},y.indexOf=function(g){return h[g]},y.contains=function(g){return typeof h[g]<"u"},y};return d},At=function(a,s,l){let n=Ct(a,s);for(let t=0;t<s;t+=1)for(let p=0;p<a;p+=1)n.setPixel(p,t,l(p,t));let r=ot();n.write(r);let d=wt(),e=r.toByteArray();for(let t=0;t<e.length;t+=1)d.writeByte(e[t]);return d.flush(),"data:image/gif;base64,"+d},it=N,se=N.stringToBytes;typeof self>"u"&&(self={syscall:()=>{throw new Error("Not implemented here")}});function A(a,...s){return globalThis.syscall(a,...s)}var H={};pt(H,{cleanDatabases:()=>Ut,getConfig:()=>Rt,getMode:()=>Lt,getVersion:()=>St,invokeCommand:()=>Et,invokeFunction:()=>Bt,listCommands:()=>Dt,listSyscalls:()=>kt,reloadPlugs:()=>_t,wipeClient:()=>Kt});function Bt(a,...s){return A("system.invokeFunction",a,...s)}function Et(a,s){return A("system.invokeCommand",a,s)}function Dt(){return A("system.listCommands")}function kt(){return A("system.listSyscalls")}function _t(){return A("system.reloadPlugs")}function Lt(){return A("system.getMode")}function St(){return A("system.getVersion")}function Rt(a,s=void 0){return A("system.getConfig",a,s)}function Kt(a=!1){return A("system.wipeClient",a)}function Ut(){return A("system.cleanDatabases")}var he=new Uint8Array(16);function Xt(a,s){let{typeNumber:l=4,errorCorrectionLevel:n="L",cellSize:r=3,margin:d,mode:e}=s??{},t=it(l,n);return t.addData(a,e),t.make(),t.createImgTag(r,d)}async function st(a,s){return{_isWidget:!0,html:Xt(a,{...await H.getConfig("bulletqr"),...s})}}var at={qrcode:st},ct={name:"bulletqr",functions:{qrcode:{path:"bulletqr.ts:qrcode",syscall:"bulletqr.qrcode"}},config:{"schema.config.properties":{bulletqr:{type:"object",properties:{typeNumber:{type:"number"},errorCorrectionLevel:{type:"string"},cellSize:{type:"number"},margin:{type:"number"},mode:{type:"string"}},nullable:!0}}},assets:{}},Oe={manifest:ct,functionMapping:at};et(at,ct,self.postMessage);export{Oe as plug};
//# sourceMappingURL=bulletqr.plug.js.map
