{
  "version": 3,
  "sources": ["https://deno.land/x/silverbullet@2.3.0/plug-api/lib/crypto.ts", "https://deno.land/x/silverbullet@2.3.0/client/lib/logger.ts", "https://deno.land/x/silverbullet@2.3.0/client/plugos/worker_runtime.ts", "../../../../../.cache/deno/deno_esbuild/registry.npmjs.org/qrcode-generator@2.0.4/node_modules/qrcode-generator/dist/qrcode.mjs", "bulletqr.ts", "../../../../../../../tmp/fca8ace53db89b1f.js"],
  "sourcesContent": ["export function base64Decode(s: string): Uint8Array {\n  const binString = atob(s);\n  const len = binString.length;\n  const bytes = new Uint8Array(len);\n  for (let i = 0; i < len; i++) {\n    bytes[i] = binString.charCodeAt(i);\n  }\n  return bytes;\n}\n\nexport function base64Encode(buffer: Uint8Array | string): string {\n  if (typeof buffer === \"string\") {\n    buffer = new TextEncoder().encode(buffer);\n  }\n  let binary = \"\";\n  const len = buffer.byteLength;\n  for (let i = 0; i < len; i++) {\n    binary += String.fromCharCode(buffer[i]);\n  }\n  return btoa(binary);\n}\n\nexport function base64EncodedDataUrl(\n  mimeType: string,\n  buffer: Uint8Array,\n): string {\n  return `data:${mimeType};base64,${base64Encode(buffer)}`;\n}\n\nexport function base64DecodeDataUrl(dataUrl: string): Uint8Array {\n  const b64Encoded = dataUrl.split(\",\", 2)[1];\n  return base64Decode(b64Encoded);\n}\n\n/**\n * Perform sha256 hash using the browser's crypto APIs\n * Note: this will only work over HTTPS\n * @param message\n */\nexport async function hashSHA256(\n  message: string | Uint8Array,\n): Promise<string> {\n  // Transform the string into an ArrayBuffer\n  const encoder = new TextEncoder();\n  const data: Uint8Array = typeof message === \"string\"\n    ? encoder.encode(message)\n    : message;\n\n  // Generate the hash\n  const hashBuffer = await globalThis.crypto.subtle.digest(\n    \"SHA-256\",\n    data as BufferSource,\n  );\n\n  // Transform the hash into a hex string\n  return Array.from(new Uint8Array(hashBuffer)).map((b) =>\n    b.toString(16).padStart(2, \"0\")\n  ).join(\"\");\n}\n\n/**\n * To avoid database clashes based on space folder path name, base URLs and encryption keys we derive\n * a database name from a hash of all these combined together\n */\nexport async function deriveDbName(\n  type: \"data\" | \"files\",\n  spaceFolderPath: string,\n  baseURI: string,\n  encryptionKey?: CryptoKey,\n): Promise<string> {\n  let keyPart = \"\";\n  if (encryptionKey) {\n    keyPart = await exportKey(encryptionKey);\n  }\n  const spaceHash = await hashSHA256(\n    `${spaceFolderPath}:${baseURI}:${keyPart}`,\n  );\n  return `sb_${type}_${spaceHash}`;\n}\n\n// Fixed counter for AES-CTR all zeroes, for determinism\nconst fixedCounter = new Uint8Array(16);\n\nexport async function encryptStringDeterministic(\n  key: CryptoKey,\n  clearText: string,\n): Promise<string> {\n  const encrypted = await crypto.subtle.encrypt(\n    { name: \"AES-CTR\", counter: fixedCounter, length: fixedCounter.length * 8 },\n    key,\n    new TextEncoder().encode(clearText),\n  );\n  return base64Encode(new Uint8Array(encrypted));\n}\n\nexport async function decryptStringDeterministic(\n  key: CryptoKey,\n  cipherText: string,\n): Promise<string> {\n  const decrypted = await crypto.subtle.decrypt(\n    { name: \"AES-CTR\", counter: fixedCounter, length: fixedCounter.length * 8 },\n    key,\n    base64Decode(cipherText) as BufferSource,\n  );\n  return new TextDecoder().decode(decrypted);\n}\n\n// Encrypt using AES-GCM with random IV; output = IV + ciphertext\nexport async function encryptAesGcm(\n  key: CryptoKey,\n  data: Uint8Array,\n): Promise<Uint8Array> {\n  const iv = crypto.getRandomValues(new Uint8Array(12)); // 96-bit IV recommended for GCM\n  const encryptedBuffer = await crypto.subtle.encrypt(\n    { name: \"AES-GCM\", iv },\n    key,\n    data as BufferSource,\n  );\n  const encrypted = new Uint8Array(encryptedBuffer);\n\n  // Prepend IV to ciphertext\n  const result = new Uint8Array(iv.length + encrypted.length);\n  result.set(iv, 0);\n  result.set(encrypted, iv.length);\n  return result;\n}\n\n// Decrypt using AES-GCM assuming input format IV + ciphertext\nexport async function decryptAesGcm(\n  key: CryptoKey,\n  encryptedData: Uint8Array,\n): Promise<Uint8Array> {\n  const iv = encryptedData.slice(0, 12); // extract IV (first 12 bytes)\n  const ciphertext = encryptedData.slice(12);\n  const decryptedBuffer = await crypto.subtle.decrypt(\n    { name: \"AES-GCM\", iv },\n    key,\n    ciphertext,\n  );\n  return new Uint8Array(decryptedBuffer);\n}\n\nexport async function deriveCTRKeyFromPassword(\n  password: string,\n  salt: Uint8Array,\n): Promise<CryptoKey> {\n  // Encode password to ArrayBuffer\n  const passwordBytes = new TextEncoder().encode(password);\n\n  // Import password as a CryptoKey\n  const baseKey = await crypto.subtle.importKey(\n    \"raw\",\n    passwordBytes,\n    { name: \"PBKDF2\" },\n    false,\n    [\"deriveBits\", \"deriveKey\"],\n  );\n\n  return crypto.subtle.deriveKey(\n    {\n      name: \"PBKDF2\",\n      salt: salt as BufferSource,\n      iterations: 100000,\n      hash: \"SHA-256\",\n    },\n    baseKey,\n    {\n      name: \"AES-CTR\",\n      length: 256,\n    },\n    true, // extractable\n    [\"encrypt\", \"decrypt\"],\n  );\n}\n\nexport function importKey(b64EncodedKey: string): Promise<CryptoKey> {\n  return crypto.subtle.importKey(\n    \"raw\",\n    base64Decode(b64EncodedKey) as BufferSource,\n    { name: \"AES-CTR\" },\n    true,\n    [\"encrypt\", \"decrypt\"],\n  );\n}\n\nexport async function exportKey(ctrKey: CryptoKey): Promise<string> {\n  const key = await crypto.subtle.exportKey(\"raw\", ctrKey);\n  return base64Encode(new Uint8Array(key));\n}\n\nexport async function deriveGCMKeyFromCTR(\n  ctrKey: CryptoKey,\n): Promise<CryptoKey> {\n  const rawKey = await crypto.subtle.exportKey(\"raw\", ctrKey);\n  return crypto.subtle.importKey(\n    \"raw\",\n    rawKey,\n    { name: \"AES-GCM\" },\n    true,\n    [\"encrypt\", \"decrypt\"],\n  );\n}\n", "// Logger that monkey patches console methods with prefixes and can capture logs for server transmission\n\nexport interface LogEntry {\n  level: \"log\" | \"info\" | \"warn\" | \"error\" | \"debug\";\n  timestamp: number;\n  message: string;\n}\n\nexport class Logger {\n  private originalConsole: {\n    log: typeof console.log;\n    info: typeof console.info;\n    warn: typeof console.warn;\n    error: typeof console.error;\n    debug: typeof console.debug;\n  };\n  public logBuffer: LogEntry[] = [];\n\n  constructor(\n    private prefix: string = \"\",\n    private maxCaptureSize: number = 1000,\n  ) {\n    this.prefix = prefix;\n\n    // Store original console methods\n    this.originalConsole = {\n      log: console.log.bind(console),\n      info: console.info.bind(console),\n      warn: console.warn.bind(console),\n      error: console.error.bind(console),\n      debug: console.debug.bind(console),\n    };\n\n    this.patchConsole();\n  }\n\n  private patchConsole(): void {\n    const createPatchedMethod = (level: keyof typeof this.originalConsole) => {\n      return (...args: any[]) => {\n        const prefixedArgs = this.prefix ? [this.prefix, ...args] : args;\n\n        // Call original console method\n        this.originalConsole[level](...prefixedArgs);\n\n        // Capture log if capturing is enabled\n        this.captureLog(level, args);\n      };\n    };\n\n    console.log = createPatchedMethod(\"log\");\n    console.info = createPatchedMethod(\"info\");\n    console.warn = createPatchedMethod(\"warn\");\n    console.error = createPatchedMethod(\"error\");\n    console.debug = createPatchedMethod(\"debug\");\n  }\n\n  private captureLog(level: LogEntry[\"level\"], args: any[]): void {\n    const entry: LogEntry = {\n      level,\n      timestamp: Date.now(),\n      message: args.map((arg) => {\n        if (typeof arg === \"string\") {\n          return arg;\n        }\n        try {\n          return JSON.stringify(arg);\n        } catch {\n          // Handle circular references or other JSON.stringify failures\n          return String(arg);\n        }\n      }).join(\" \"),\n    };\n\n    this.logBuffer.push(entry);\n\n    // Maintain max capture size by removing oldest entries\n    if (this.logBuffer.length > this.maxCaptureSize) {\n      this.logBuffer.shift();\n    }\n  }\n\n  /**\n   * Posts all buffered logs to a server endpoint\n   */\n  async postToServer(logEndpoint: string, source: string) {\n    const logs = this.logBuffer;\n    if (logs.length > 0) {\n      // Flush the buffer\n      const logCopy = [...this.logBuffer];\n      this.logBuffer = [];\n      try {\n        const resp = await fetch(logEndpoint, {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify(logCopy.map((entry) => ({ ...entry, source }))),\n        });\n        if (!resp.ok) {\n          throw new Error(\"Failed to post logs to server\");\n        }\n      } catch (e: any) {\n        console.warn(\"Could not post logs to server\", e.message);\n        // Put back the logs into the buffer\n        this.logBuffer.unshift(...logCopy);\n      }\n    }\n  }\n}\n\n// Global logger instance\nlet globalLogger: Logger | undefined = undefined;\n\nexport function initLogger(prefix: string = \"\"): Logger {\n  globalLogger = new Logger(prefix);\n  return globalLogger;\n}\n", "// This is the runtime imported from the compiled plug worker code\nimport type { ControllerMessage, WorkerMessage } from \"./protocol.ts\";\nimport type {\n  ProxyFetchRequest64,\n  ProxyFetchResponse64,\n} from \"./proxy_fetch.ts\";\nimport { base64Decode, base64Encode } from \"../../plug-api/lib/crypto.ts\";\nimport { initLogger } from \"../lib/logger.ts\";\n\ndeclare global {\n  function syscall(name: string, ...args: any[]): Promise<any>;\n}\n\nlet workerPostMessage = (_msg: ControllerMessage): void => {\n  throw new Error(\"Not initialized yet\");\n};\n\n// Are we running in a (web) worker?\n\n// Determines if we're running in a web worker environment (Deno or browser)\n// - in a browser's main threads, typeof window is \"object\"\n// - in a browser's worker threads, typeof window === \"undefined\"\n// - in Deno's main thread typeof window === \"object\"\n// - in Deno's workers typeof window === \"undefined\n// - in Cloudflare workers typeof window === \"undefined\", but typeof globalThis.WebSocketPair is defined\nconst runningAsWebWorker = typeof window === \"undefined\" &&\n  // @ts-ignore: globalThis\n  typeof globalThis.WebSocketPair === \"undefined\";\n\nif (typeof Deno === \"undefined\") {\n  // @ts-ignore: Deno hack\n  self.Deno = {\n    args: [],\n    // @ts-ignore: Deno hack\n    build: {\n      arch: \"x86_64\",\n    },\n    env: {\n      // @ts-ignore: Deno hack\n      get() {\n      },\n    },\n  };\n}\n\nconst pendingRequests = new Map<\n  number,\n  {\n    resolve: (result: unknown) => void;\n    reject: (e: any) => void;\n  }\n>();\n\nlet syscallReqId = 0;\n\nif (runningAsWebWorker) {\n  globalThis.syscall = async (name: string, ...args: any[]) => {\n    return await new Promise((resolve, reject) => {\n      syscallReqId++;\n      pendingRequests.set(syscallReqId, { resolve, reject });\n      workerPostMessage({\n        type: \"sys\",\n        id: syscallReqId,\n        name,\n        args,\n      });\n    });\n  };\n}\n\nexport function setupMessageListener(\n  // deno-lint-ignore ban-types\n  functionMapping: Record<string, Function>,\n  manifest: any,\n  postMessageFn: (msg: ControllerMessage) => void,\n) {\n  if (!runningAsWebWorker) {\n    // Don't do any of this stuff if this is not a web worker\n    // This caters to the NoSandbox run mode\n    return;\n  }\n  workerPostMessage = postMessageFn;\n  self.addEventListener(\"message\", (event: { data: WorkerMessage }) => {\n    (async () => {\n      const data = event.data;\n      switch (data.type) {\n        case \"inv\":\n          {\n            const fn = functionMapping[data.name!];\n            if (!fn) {\n              throw new Error(`Function not loaded: ${data.name}`);\n            }\n            try {\n              const result = await Promise.resolve(fn(...(data.args || [])));\n              workerPostMessage({\n                type: \"invr\",\n                id: data.id,\n                result: result,\n              } as ControllerMessage);\n            } catch (e: any) {\n              console.error(\n                \"An exception was thrown as a result of invoking function\",\n                data.name,\n                \"error:\",\n                e.message,\n              );\n              workerPostMessage({\n                type: \"invr\",\n                id: data.id!,\n                error: e.message,\n              });\n            }\n          }\n          break;\n        case \"sysr\":\n          {\n            const syscallId = data.id;\n            const lookup = pendingRequests.get(syscallId);\n            if (!lookup) {\n              throw Error(\"Invalid request id\");\n            }\n            pendingRequests.delete(syscallId);\n            if (data.error) {\n              lookup.reject(new Error(data.error));\n            } else {\n              lookup.resolve(data.result);\n            }\n          }\n\n          break;\n      }\n    })().catch(console.error);\n  });\n  // Signal initialization with manifest\n  workerPostMessage({\n    type: \"manifest\",\n    manifest,\n  });\n  initLogger(`[${manifest.name} plug]`);\n}\n\nexport async function sandboxFetch(\n  reqInfo: RequestInfo,\n  options?: ProxyFetchRequest64,\n): Promise<ProxyFetchResponse64> {\n  if (typeof reqInfo !== \"string\") {\n    const body = new Uint8Array(await reqInfo.arrayBuffer());\n    const encodedBody = body.length > 0 ? base64Encode(body) : undefined;\n    options = {\n      method: reqInfo.method,\n      headers: Object.fromEntries(reqInfo.headers.entries()),\n      base64Body: encodedBody,\n    };\n    reqInfo = reqInfo.url;\n  }\n  return syscall(\"sandboxFetch.fetch\", reqInfo, options);\n}\n\n// @ts-ignore: monkey patching fetch\nglobalThis.nativeFetch = globalThis.fetch;\n\n// Monkey patch fetch()\nexport function monkeyPatchFetch() {\n  // @ts-ignore: monkey patching fetch\n  globalThis.fetch = async function (\n    reqInfo: RequestInfo,\n    init?: RequestInit,\n  ): Promise<Response> {\n    const encodedBody = init && init.body\n      ? base64Encode(\n        new Uint8Array(await (new Response(init.body)).arrayBuffer()),\n      )\n      : undefined;\n    const r = await sandboxFetch(\n      reqInfo,\n      init && {\n        method: init.method,\n        headers: init.headers as Record<string, string>,\n        base64Body: encodedBody,\n      },\n    );\n    // Casting the response to \"any\" for now, since of weird Deno typing\n    return new Response(\n      (r.base64Body ? base64Decode(r.base64Body) : null) as any,\n      {\n        status: r.status,\n        headers: r.headers,\n      },\n    );\n  };\n}\n\nif (runningAsWebWorker) {\n  monkeyPatchFetch();\n}\n", "//---------------------------------------------------------------------\n//\n// QR Code Generator for JavaScript\n//\n// Copyright (c) 2009 Kazuhiko Arase\n//\n// URL: http://www.d-project.com/\n//\n// Licensed under the MIT license:\n//  http://www.opensource.org/licenses/mit-license.php\n//\n// The word 'QR Code' is registered trademark of\n// DENSO WAVE INCORPORATED\n//  http://www.denso-wave.com/qrcode/faqpatent-e.html\n//\n//---------------------------------------------------------------------\n\n//---------------------------------------------------------------------\n// qrcode\n//---------------------------------------------------------------------\n\n/**\n * qrcode\n * @param typeNumber 1 to 40\n * @param errorCorrectionLevel 'L','M','Q','H'\n */\nexport const qrcode = function(typeNumber, errorCorrectionLevel) {\n\n  const PAD0 = 0xEC;\n  const PAD1 = 0x11;\n\n  let _typeNumber = typeNumber;\n  const _errorCorrectionLevel = QRErrorCorrectionLevel[errorCorrectionLevel];\n  let _modules = null;\n  let _moduleCount = 0;\n  let _dataCache = null;\n  const _dataList = [];\n\n  const _this = {};\n\n  const makeImpl = function(test, maskPattern) {\n\n    _moduleCount = _typeNumber * 4 + 17;\n    _modules = function(moduleCount) {\n      const modules = new Array(moduleCount);\n      for (let row = 0; row < moduleCount; row += 1) {\n        modules[row] = new Array(moduleCount);\n        for (let col = 0; col < moduleCount; col += 1) {\n          modules[row][col] = null;\n        }\n      }\n      return modules;\n    }(_moduleCount);\n\n    setupPositionProbePattern(0, 0);\n    setupPositionProbePattern(_moduleCount - 7, 0);\n    setupPositionProbePattern(0, _moduleCount - 7);\n    setupPositionAdjustPattern();\n    setupTimingPattern();\n    setupTypeInfo(test, maskPattern);\n\n    if (_typeNumber >= 7) {\n      setupTypeNumber(test);\n    }\n\n    if (_dataCache == null) {\n      _dataCache = createData(_typeNumber, _errorCorrectionLevel, _dataList);\n    }\n\n    mapData(_dataCache, maskPattern);\n  };\n\n  const setupPositionProbePattern = function(row, col) {\n\n    for (let r = -1; r <= 7; r += 1) {\n\n      if (row + r <= -1 || _moduleCount <= row + r) continue;\n\n      for (let c = -1; c <= 7; c += 1) {\n\n        if (col + c <= -1 || _moduleCount <= col + c) continue;\n\n        if ( (0 <= r && r <= 6 && (c == 0 || c == 6) )\n            || (0 <= c && c <= 6 && (r == 0 || r == 6) )\n            || (2 <= r && r <= 4 && 2 <= c && c <= 4) ) {\n          _modules[row + r][col + c] = true;\n        } else {\n          _modules[row + r][col + c] = false;\n        }\n      }\n    }\n  };\n\n  const getBestMaskPattern = function() {\n\n    let minLostPoint = 0;\n    let pattern = 0;\n\n    for (let i = 0; i < 8; i += 1) {\n\n      makeImpl(true, i);\n\n      const lostPoint = QRUtil.getLostPoint(_this);\n\n      if (i == 0 || minLostPoint > lostPoint) {\n        minLostPoint = lostPoint;\n        pattern = i;\n      }\n    }\n\n    return pattern;\n  };\n\n  const setupTimingPattern = function() {\n\n    for (let r = 8; r < _moduleCount - 8; r += 1) {\n      if (_modules[r][6] != null) {\n        continue;\n      }\n      _modules[r][6] = (r % 2 == 0);\n    }\n\n    for (let c = 8; c < _moduleCount - 8; c += 1) {\n      if (_modules[6][c] != null) {\n        continue;\n      }\n      _modules[6][c] = (c % 2 == 0);\n    }\n  };\n\n  const setupPositionAdjustPattern = function() {\n\n    const pos = QRUtil.getPatternPosition(_typeNumber);\n\n    for (let i = 0; i < pos.length; i += 1) {\n\n      for (let j = 0; j < pos.length; j += 1) {\n\n        const row = pos[i];\n        const col = pos[j];\n\n        if (_modules[row][col] != null) {\n          continue;\n        }\n\n        for (let r = -2; r <= 2; r += 1) {\n\n          for (let c = -2; c <= 2; c += 1) {\n\n            if (r == -2 || r == 2 || c == -2 || c == 2\n                || (r == 0 && c == 0) ) {\n              _modules[row + r][col + c] = true;\n            } else {\n              _modules[row + r][col + c] = false;\n            }\n          }\n        }\n      }\n    }\n  };\n\n  const setupTypeNumber = function(test) {\n\n    const bits = QRUtil.getBCHTypeNumber(_typeNumber);\n\n    for (let i = 0; i < 18; i += 1) {\n      const mod = (!test && ( (bits >> i) & 1) == 1);\n      _modules[Math.floor(i / 3)][i % 3 + _moduleCount - 8 - 3] = mod;\n    }\n\n    for (let i = 0; i < 18; i += 1) {\n      const mod = (!test && ( (bits >> i) & 1) == 1);\n      _modules[i % 3 + _moduleCount - 8 - 3][Math.floor(i / 3)] = mod;\n    }\n  };\n\n  const setupTypeInfo = function(test, maskPattern) {\n\n    const data = (_errorCorrectionLevel << 3) | maskPattern;\n    const bits = QRUtil.getBCHTypeInfo(data);\n\n    // vertical\n    for (let i = 0; i < 15; i += 1) {\n\n      const mod = (!test && ( (bits >> i) & 1) == 1);\n\n      if (i < 6) {\n        _modules[i][8] = mod;\n      } else if (i < 8) {\n        _modules[i + 1][8] = mod;\n      } else {\n        _modules[_moduleCount - 15 + i][8] = mod;\n      }\n    }\n\n    // horizontal\n    for (let i = 0; i < 15; i += 1) {\n\n      const mod = (!test && ( (bits >> i) & 1) == 1);\n\n      if (i < 8) {\n        _modules[8][_moduleCount - i - 1] = mod;\n      } else if (i < 9) {\n        _modules[8][15 - i - 1 + 1] = mod;\n      } else {\n        _modules[8][15 - i - 1] = mod;\n      }\n    }\n\n    // fixed module\n    _modules[_moduleCount - 8][8] = (!test);\n  };\n\n  const mapData = function(data, maskPattern) {\n\n    let inc = -1;\n    let row = _moduleCount - 1;\n    let bitIndex = 7;\n    let byteIndex = 0;\n    const maskFunc = QRUtil.getMaskFunction(maskPattern);\n\n    for (let col = _moduleCount - 1; col > 0; col -= 2) {\n\n      if (col == 6) col -= 1;\n\n      while (true) {\n\n        for (let c = 0; c < 2; c += 1) {\n\n          if (_modules[row][col - c] == null) {\n\n            let dark = false;\n\n            if (byteIndex < data.length) {\n              dark = ( ( (data[byteIndex] >>> bitIndex) & 1) == 1);\n            }\n\n            const mask = maskFunc(row, col - c);\n\n            if (mask) {\n              dark = !dark;\n            }\n\n            _modules[row][col - c] = dark;\n            bitIndex -= 1;\n\n            if (bitIndex == -1) {\n              byteIndex += 1;\n              bitIndex = 7;\n            }\n          }\n        }\n\n        row += inc;\n\n        if (row < 0 || _moduleCount <= row) {\n          row -= inc;\n          inc = -inc;\n          break;\n        }\n      }\n    }\n  };\n\n  const createBytes = function(buffer, rsBlocks) {\n\n    let offset = 0;\n\n    let maxDcCount = 0;\n    let maxEcCount = 0;\n\n    const dcdata = new Array(rsBlocks.length);\n    const ecdata = new Array(rsBlocks.length);\n\n    for (let r = 0; r < rsBlocks.length; r += 1) {\n\n      const dcCount = rsBlocks[r].dataCount;\n      const ecCount = rsBlocks[r].totalCount - dcCount;\n\n      maxDcCount = Math.max(maxDcCount, dcCount);\n      maxEcCount = Math.max(maxEcCount, ecCount);\n\n      dcdata[r] = new Array(dcCount);\n\n      for (let i = 0; i < dcdata[r].length; i += 1) {\n        dcdata[r][i] = 0xff & buffer.getBuffer()[i + offset];\n      }\n      offset += dcCount;\n\n      const rsPoly = QRUtil.getErrorCorrectPolynomial(ecCount);\n      const rawPoly = qrPolynomial(dcdata[r], rsPoly.getLength() - 1);\n\n      const modPoly = rawPoly.mod(rsPoly);\n      ecdata[r] = new Array(rsPoly.getLength() - 1);\n      for (let i = 0; i < ecdata[r].length; i += 1) {\n        const modIndex = i + modPoly.getLength() - ecdata[r].length;\n        ecdata[r][i] = (modIndex >= 0)? modPoly.getAt(modIndex) : 0;\n      }\n    }\n\n    let totalCodeCount = 0;\n    for (let i = 0; i < rsBlocks.length; i += 1) {\n      totalCodeCount += rsBlocks[i].totalCount;\n    }\n\n    const data = new Array(totalCodeCount);\n    let index = 0;\n\n    for (let i = 0; i < maxDcCount; i += 1) {\n      for (let r = 0; r < rsBlocks.length; r += 1) {\n        if (i < dcdata[r].length) {\n          data[index] = dcdata[r][i];\n          index += 1;\n        }\n      }\n    }\n\n    for (let i = 0; i < maxEcCount; i += 1) {\n      for (let r = 0; r < rsBlocks.length; r += 1) {\n        if (i < ecdata[r].length) {\n          data[index] = ecdata[r][i];\n          index += 1;\n        }\n      }\n    }\n\n    return data;\n  };\n\n  const createData = function(typeNumber, errorCorrectionLevel, dataList) {\n\n    const rsBlocks = QRRSBlock.getRSBlocks(typeNumber, errorCorrectionLevel);\n\n    const buffer = qrBitBuffer();\n\n    for (let i = 0; i < dataList.length; i += 1) {\n      const data = dataList[i];\n      buffer.put(data.getMode(), 4);\n      buffer.put(data.getLength(), QRUtil.getLengthInBits(data.getMode(), typeNumber) );\n      data.write(buffer);\n    }\n\n    // calc num max data.\n    let totalDataCount = 0;\n    for (let i = 0; i < rsBlocks.length; i += 1) {\n      totalDataCount += rsBlocks[i].dataCount;\n    }\n\n    if (buffer.getLengthInBits() > totalDataCount * 8) {\n      throw 'code length overflow. ('\n        + buffer.getLengthInBits()\n        + '>'\n        + totalDataCount * 8\n        + ')';\n    }\n\n    // end code\n    if (buffer.getLengthInBits() + 4 <= totalDataCount * 8) {\n      buffer.put(0, 4);\n    }\n\n    // padding\n    while (buffer.getLengthInBits() % 8 != 0) {\n      buffer.putBit(false);\n    }\n\n    // padding\n    while (true) {\n\n      if (buffer.getLengthInBits() >= totalDataCount * 8) {\n        break;\n      }\n      buffer.put(PAD0, 8);\n\n      if (buffer.getLengthInBits() >= totalDataCount * 8) {\n        break;\n      }\n      buffer.put(PAD1, 8);\n    }\n\n    return createBytes(buffer, rsBlocks);\n  };\n\n  _this.addData = function(data, mode) {\n\n    mode = mode || 'Byte';\n\n    let newData = null;\n\n    switch(mode) {\n    case 'Numeric' :\n      newData = qrNumber(data);\n      break;\n    case 'Alphanumeric' :\n      newData = qrAlphaNum(data);\n      break;\n    case 'Byte' :\n      newData = qr8BitByte(data);\n      break;\n    case 'Kanji' :\n      newData = qrKanji(data);\n      break;\n    default :\n      throw 'mode:' + mode;\n    }\n\n    _dataList.push(newData);\n    _dataCache = null;\n  };\n\n  _this.isDark = function(row, col) {\n    if (row < 0 || _moduleCount <= row || col < 0 || _moduleCount <= col) {\n      throw row + ',' + col;\n    }\n    return _modules[row][col];\n  };\n\n  _this.getModuleCount = function() {\n    return _moduleCount;\n  };\n\n  _this.make = function() {\n    if (_typeNumber < 1) {\n      let typeNumber = 1;\n\n      for (; typeNumber < 40; typeNumber++) {\n        const rsBlocks = QRRSBlock.getRSBlocks(typeNumber, _errorCorrectionLevel);\n        const buffer = qrBitBuffer();\n\n        for (let i = 0; i < _dataList.length; i++) {\n          const data = _dataList[i];\n          buffer.put(data.getMode(), 4);\n          buffer.put(data.getLength(), QRUtil.getLengthInBits(data.getMode(), typeNumber) );\n          data.write(buffer);\n        }\n\n        let totalDataCount = 0;\n        for (let i = 0; i < rsBlocks.length; i++) {\n          totalDataCount += rsBlocks[i].dataCount;\n        }\n\n        if (buffer.getLengthInBits() <= totalDataCount * 8) {\n          break;\n        }\n      }\n\n      _typeNumber = typeNumber;\n    }\n\n    makeImpl(false, getBestMaskPattern() );\n  };\n\n  _this.createTableTag = function(cellSize, margin) {\n\n    cellSize = cellSize || 2;\n    margin = (typeof margin == 'undefined')? cellSize * 4 : margin;\n\n    let qrHtml = '';\n\n    qrHtml += '<table style=\"';\n    qrHtml += ' border-width: 0px; border-style: none;';\n    qrHtml += ' border-collapse: collapse;';\n    qrHtml += ' padding: 0px; margin: ' + margin + 'px;';\n    qrHtml += '\">';\n    qrHtml += '<tbody>';\n\n    for (let r = 0; r < _this.getModuleCount(); r += 1) {\n\n      qrHtml += '<tr>';\n\n      for (let c = 0; c < _this.getModuleCount(); c += 1) {\n        qrHtml += '<td style=\"';\n        qrHtml += ' border-width: 0px; border-style: none;';\n        qrHtml += ' border-collapse: collapse;';\n        qrHtml += ' padding: 0px; margin: 0px;';\n        qrHtml += ' width: ' + cellSize + 'px;';\n        qrHtml += ' height: ' + cellSize + 'px;';\n        qrHtml += ' background-color: ';\n        qrHtml += _this.isDark(r, c)? '#000000' : '#ffffff';\n        qrHtml += ';';\n        qrHtml += '\"/>';\n      }\n\n      qrHtml += '</tr>';\n    }\n\n    qrHtml += '</tbody>';\n    qrHtml += '</table>';\n\n    return qrHtml;\n  };\n\n  _this.createSvgTag = function(cellSize, margin, alt, title) {\n\n    let opts = {};\n    if (typeof arguments[0] == 'object') {\n      // Called by options.\n      opts = arguments[0];\n      // overwrite cellSize and margin.\n      cellSize = opts.cellSize;\n      margin = opts.margin;\n      alt = opts.alt;\n      title = opts.title;\n    }\n\n    cellSize = cellSize || 2;\n    margin = (typeof margin == 'undefined')? cellSize * 4 : margin;\n\n    // Compose alt property surrogate\n    alt = (typeof alt === 'string') ? {text: alt} : alt || {};\n    alt.text = alt.text || null;\n    alt.id = (alt.text) ? alt.id || 'qrcode-description' : null;\n\n    // Compose title property surrogate\n    title = (typeof title === 'string') ? {text: title} : title || {};\n    title.text = title.text || null;\n    title.id = (title.text) ? title.id || 'qrcode-title' : null;\n\n    const size = _this.getModuleCount() * cellSize + margin * 2;\n    let c, mc, r, mr, qrSvg='', rect;\n\n    rect = 'l' + cellSize + ',0 0,' + cellSize +\n      ' -' + cellSize + ',0 0,-' + cellSize + 'z ';\n\n    qrSvg += '<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"';\n    qrSvg += !opts.scalable ? ' width=\"' + size + 'px\" height=\"' + size + 'px\"' : '';\n    qrSvg += ' viewBox=\"0 0 ' + size + ' ' + size + '\" ';\n    qrSvg += ' preserveAspectRatio=\"xMinYMin meet\"';\n    qrSvg += (title.text || alt.text) ? ' role=\"img\" aria-labelledby=\"' +\n        escapeXml([title.id, alt.id].join(' ').trim() ) + '\"' : '';\n    qrSvg += '>';\n    qrSvg += (title.text) ? '<title id=\"' + escapeXml(title.id) + '\">' +\n        escapeXml(title.text) + '</title>' : '';\n    qrSvg += (alt.text) ? '<description id=\"' + escapeXml(alt.id) + '\">' +\n        escapeXml(alt.text) + '</description>' : '';\n    qrSvg += '<rect width=\"100%\" height=\"100%\" fill=\"white\" cx=\"0\" cy=\"0\"/>';\n    qrSvg += '<path d=\"';\n\n    for (r = 0; r < _this.getModuleCount(); r += 1) {\n      mr = r * cellSize + margin;\n      for (c = 0; c < _this.getModuleCount(); c += 1) {\n        if (_this.isDark(r, c) ) {\n          mc = c*cellSize+margin;\n          qrSvg += 'M' + mc + ',' + mr + rect;\n        }\n      }\n    }\n\n    qrSvg += '\" stroke=\"transparent\" fill=\"black\"/>';\n    qrSvg += '</svg>';\n\n    return qrSvg;\n  };\n\n  _this.createDataURL = function(cellSize, margin) {\n\n    cellSize = cellSize || 2;\n    margin = (typeof margin == 'undefined')? cellSize * 4 : margin;\n\n    const size = _this.getModuleCount() * cellSize + margin * 2;\n    const min = margin;\n    const max = size - margin;\n\n    return createDataURL(size, size, function(x, y) {\n      if (min <= x && x < max && min <= y && y < max) {\n        const c = Math.floor( (x - min) / cellSize);\n        const r = Math.floor( (y - min) / cellSize);\n        return _this.isDark(r, c)? 0 : 1;\n      } else {\n        return 1;\n      }\n    } );\n  };\n\n  _this.createImgTag = function(cellSize, margin, alt) {\n\n    cellSize = cellSize || 2;\n    margin = (typeof margin == 'undefined')? cellSize * 4 : margin;\n\n    const size = _this.getModuleCount() * cellSize + margin * 2;\n\n    let img = '';\n    img += '<img';\n    img += '\\u0020src=\"';\n    img += _this.createDataURL(cellSize, margin);\n    img += '\"';\n    img += '\\u0020width=\"';\n    img += size;\n    img += '\"';\n    img += '\\u0020height=\"';\n    img += size;\n    img += '\"';\n    if (alt) {\n      img += '\\u0020alt=\"';\n      img += escapeXml(alt);\n      img += '\"';\n    }\n    img += '/>';\n\n    return img;\n  };\n\n  const escapeXml = function(s) {\n    let escaped = '';\n    for (let i = 0; i < s.length; i += 1) {\n      const c = s.charAt(i);\n      switch(c) {\n      case '<': escaped += '&lt;'; break;\n      case '>': escaped += '&gt;'; break;\n      case '&': escaped += '&amp;'; break;\n      case '\"': escaped += '&quot;'; break;\n      default : escaped += c; break;\n      }\n    }\n    return escaped;\n  };\n\n  const _createHalfASCII = function(margin) {\n    const cellSize = 1;\n    margin = (typeof margin == 'undefined')? cellSize * 2 : margin;\n\n    const size = _this.getModuleCount() * cellSize + margin * 2;\n    const min = margin;\n    const max = size - margin;\n\n    let y, x, r1, r2, p;\n\n    const blocks = {\n      '\u2588\u2588': '\u2588',\n      '\u2588 ': '\u2580',\n      ' \u2588': '\u2584',\n      '  ': ' '\n    };\n\n    const blocksLastLineNoMargin = {\n      '\u2588\u2588': '\u2580',\n      '\u2588 ': '\u2580',\n      ' \u2588': ' ',\n      '  ': ' '\n    };\n\n    let ascii = '';\n    for (y = 0; y < size; y += 2) {\n      r1 = Math.floor((y - min) / cellSize);\n      r2 = Math.floor((y + 1 - min) / cellSize);\n      for (x = 0; x < size; x += 1) {\n        p = '\u2588';\n\n        if (min <= x && x < max && min <= y && y < max && _this.isDark(r1, Math.floor((x - min) / cellSize))) {\n          p = ' ';\n        }\n\n        if (min <= x && x < max && min <= y+1 && y+1 < max && _this.isDark(r2, Math.floor((x - min) / cellSize))) {\n          p += ' ';\n        }\n        else {\n          p += '\u2588';\n        }\n\n        // Output 2 characters per pixel, to create full square. 1 character per pixels gives only half width of square.\n        ascii += (margin < 1 && y+1 >= max) ? blocksLastLineNoMargin[p] : blocks[p];\n      }\n\n      ascii += '\\n';\n    }\n\n    if (size % 2 && margin > 0) {\n      return ascii.substring(0, ascii.length - size - 1) + Array(size+1).join('\u2580');\n    }\n\n    return ascii.substring(0, ascii.length-1);\n  };\n\n  _this.createASCII = function(cellSize, margin) {\n    cellSize = cellSize || 1;\n\n    if (cellSize < 2) {\n      return _createHalfASCII(margin);\n    }\n\n    cellSize -= 1;\n    margin = (typeof margin == 'undefined')? cellSize * 2 : margin;\n\n    const size = _this.getModuleCount() * cellSize + margin * 2;\n    const min = margin;\n    const max = size - margin;\n\n    let y, x, r, p;\n\n    const white = Array(cellSize+1).join('\u2588\u2588');\n    const black = Array(cellSize+1).join('  ');\n\n    let ascii = '';\n    let line = '';\n    for (y = 0; y < size; y += 1) {\n      r = Math.floor( (y - min) / cellSize);\n      line = '';\n      for (x = 0; x < size; x += 1) {\n        p = 1;\n\n        if (min <= x && x < max && min <= y && y < max && _this.isDark(r, Math.floor((x - min) / cellSize))) {\n          p = 0;\n        }\n\n        // Output 2 characters per pixel, to create full square. 1 character per pixels gives only half width of square.\n        line += p ? white : black;\n      }\n\n      for (r = 0; r < cellSize; r += 1) {\n        ascii += line + '\\n';\n      }\n    }\n\n    return ascii.substring(0, ascii.length-1);\n  };\n\n  _this.renderTo2dContext = function(context, cellSize) {\n    cellSize = cellSize || 2;\n    const length = _this.getModuleCount();\n    for (let row = 0; row < length; row++) {\n      for (let col = 0; col < length; col++) {\n        context.fillStyle = _this.isDark(row, col) ? 'black' : 'white';\n        context.fillRect(col * cellSize, row * cellSize, cellSize, cellSize);\n      }\n    }\n  }\n\n  return _this;\n};\n\n//---------------------------------------------------------------------\n// qrcode.stringToBytes\n//---------------------------------------------------------------------\n\nqrcode.stringToBytes = function(s) {\n  const bytes = [];\n  for (let i = 0; i < s.length; i += 1) {\n    const c = s.charCodeAt(i);\n    bytes.push(c & 0xff);\n  }\n  return bytes;\n};\n\n//---------------------------------------------------------------------\n// qrcode.createStringToBytes\n//---------------------------------------------------------------------\n\n/**\n * @param unicodeData base64 string of byte array.\n * [16bit Unicode],[16bit Bytes], ...\n * @param numChars\n */\nqrcode.createStringToBytes = function(unicodeData, numChars) {\n\n  // create conversion map.\n\n  const unicodeMap = function() {\n\n    const bin = base64DecodeInputStream(unicodeData);\n    const read = function() {\n      const b = bin.read();\n      if (b == -1) throw 'eof';\n      return b;\n    };\n\n    let count = 0;\n    const unicodeMap = {};\n    while (true) {\n      const b0 = bin.read();\n      if (b0 == -1) break;\n      const b1 = read();\n      const b2 = read();\n      const b3 = read();\n      const k = String.fromCharCode( (b0 << 8) | b1);\n      const v = (b2 << 8) | b3;\n      unicodeMap[k] = v;\n      count += 1;\n    }\n    if (count != numChars) {\n      throw count + ' != ' + numChars;\n    }\n\n    return unicodeMap;\n  }();\n\n  const unknownChar = '?'.charCodeAt(0);\n\n  return function(s) {\n    const bytes = [];\n    for (let i = 0; i < s.length; i += 1) {\n      const c = s.charCodeAt(i);\n      if (c < 128) {\n        bytes.push(c);\n      } else {\n        const b = unicodeMap[s.charAt(i)];\n        if (typeof b == 'number') {\n          if ( (b & 0xff) == b) {\n            // 1byte\n            bytes.push(b);\n          } else {\n            // 2bytes\n            bytes.push(b >>> 8);\n            bytes.push(b & 0xff);\n          }\n        } else {\n          bytes.push(unknownChar);\n        }\n      }\n    }\n    return bytes;\n  };\n};\n\n//---------------------------------------------------------------------\n// QRMode\n//---------------------------------------------------------------------\n\nconst QRMode = {\n  MODE_NUMBER :    1 << 0,\n  MODE_ALPHA_NUM : 1 << 1,\n  MODE_8BIT_BYTE : 1 << 2,\n  MODE_KANJI :     1 << 3\n};\n\n//---------------------------------------------------------------------\n// QRErrorCorrectionLevel\n//---------------------------------------------------------------------\n\nconst QRErrorCorrectionLevel = {\n  L : 1,\n  M : 0,\n  Q : 3,\n  H : 2\n};\n\n//---------------------------------------------------------------------\n// QRMaskPattern\n//---------------------------------------------------------------------\n\nconst QRMaskPattern = {\n  PATTERN000 : 0,\n  PATTERN001 : 1,\n  PATTERN010 : 2,\n  PATTERN011 : 3,\n  PATTERN100 : 4,\n  PATTERN101 : 5,\n  PATTERN110 : 6,\n  PATTERN111 : 7\n};\n\n//---------------------------------------------------------------------\n// QRUtil\n//---------------------------------------------------------------------\n\nconst QRUtil = function() {\n\n  const PATTERN_POSITION_TABLE = [\n    [],\n    [6, 18],\n    [6, 22],\n    [6, 26],\n    [6, 30],\n    [6, 34],\n    [6, 22, 38],\n    [6, 24, 42],\n    [6, 26, 46],\n    [6, 28, 50],\n    [6, 30, 54],\n    [6, 32, 58],\n    [6, 34, 62],\n    [6, 26, 46, 66],\n    [6, 26, 48, 70],\n    [6, 26, 50, 74],\n    [6, 30, 54, 78],\n    [6, 30, 56, 82],\n    [6, 30, 58, 86],\n    [6, 34, 62, 90],\n    [6, 28, 50, 72, 94],\n    [6, 26, 50, 74, 98],\n    [6, 30, 54, 78, 102],\n    [6, 28, 54, 80, 106],\n    [6, 32, 58, 84, 110],\n    [6, 30, 58, 86, 114],\n    [6, 34, 62, 90, 118],\n    [6, 26, 50, 74, 98, 122],\n    [6, 30, 54, 78, 102, 126],\n    [6, 26, 52, 78, 104, 130],\n    [6, 30, 56, 82, 108, 134],\n    [6, 34, 60, 86, 112, 138],\n    [6, 30, 58, 86, 114, 142],\n    [6, 34, 62, 90, 118, 146],\n    [6, 30, 54, 78, 102, 126, 150],\n    [6, 24, 50, 76, 102, 128, 154],\n    [6, 28, 54, 80, 106, 132, 158],\n    [6, 32, 58, 84, 110, 136, 162],\n    [6, 26, 54, 82, 110, 138, 166],\n    [6, 30, 58, 86, 114, 142, 170]\n  ];\n  const G15 = (1 << 10) | (1 << 8) | (1 << 5) | (1 << 4) | (1 << 2) | (1 << 1) | (1 << 0);\n  const G18 = (1 << 12) | (1 << 11) | (1 << 10) | (1 << 9) | (1 << 8) | (1 << 5) | (1 << 2) | (1 << 0);\n  const G15_MASK = (1 << 14) | (1 << 12) | (1 << 10) | (1 << 4) | (1 << 1);\n\n  const _this = {};\n\n  const getBCHDigit = function(data) {\n    let digit = 0;\n    while (data != 0) {\n      digit += 1;\n      data >>>= 1;\n    }\n    return digit;\n  };\n\n  _this.getBCHTypeInfo = function(data) {\n    let d = data << 10;\n    while (getBCHDigit(d) - getBCHDigit(G15) >= 0) {\n      d ^= (G15 << (getBCHDigit(d) - getBCHDigit(G15) ) );\n    }\n    return ( (data << 10) | d) ^ G15_MASK;\n  };\n\n  _this.getBCHTypeNumber = function(data) {\n    let d = data << 12;\n    while (getBCHDigit(d) - getBCHDigit(G18) >= 0) {\n      d ^= (G18 << (getBCHDigit(d) - getBCHDigit(G18) ) );\n    }\n    return (data << 12) | d;\n  };\n\n  _this.getPatternPosition = function(typeNumber) {\n    return PATTERN_POSITION_TABLE[typeNumber - 1];\n  };\n\n  _this.getMaskFunction = function(maskPattern) {\n\n    switch (maskPattern) {\n\n    case QRMaskPattern.PATTERN000 :\n      return function(i, j) { return (i + j) % 2 == 0; };\n    case QRMaskPattern.PATTERN001 :\n      return function(i, j) { return i % 2 == 0; };\n    case QRMaskPattern.PATTERN010 :\n      return function(i, j) { return j % 3 == 0; };\n    case QRMaskPattern.PATTERN011 :\n      return function(i, j) { return (i + j) % 3 == 0; };\n    case QRMaskPattern.PATTERN100 :\n      return function(i, j) { return (Math.floor(i / 2) + Math.floor(j / 3) ) % 2 == 0; };\n    case QRMaskPattern.PATTERN101 :\n      return function(i, j) { return (i * j) % 2 + (i * j) % 3 == 0; };\n    case QRMaskPattern.PATTERN110 :\n      return function(i, j) { return ( (i * j) % 2 + (i * j) % 3) % 2 == 0; };\n    case QRMaskPattern.PATTERN111 :\n      return function(i, j) { return ( (i * j) % 3 + (i + j) % 2) % 2 == 0; };\n\n    default :\n      throw 'bad maskPattern:' + maskPattern;\n    }\n  };\n\n  _this.getErrorCorrectPolynomial = function(errorCorrectLength) {\n    let a = qrPolynomial([1], 0);\n    for (let i = 0; i < errorCorrectLength; i += 1) {\n      a = a.multiply(qrPolynomial([1, QRMath.gexp(i)], 0) );\n    }\n    return a;\n  };\n\n  _this.getLengthInBits = function(mode, type) {\n\n    if (1 <= type && type < 10) {\n\n      // 1 - 9\n\n      switch(mode) {\n      case QRMode.MODE_NUMBER    : return 10;\n      case QRMode.MODE_ALPHA_NUM : return 9;\n      case QRMode.MODE_8BIT_BYTE : return 8;\n      case QRMode.MODE_KANJI     : return 8;\n      default :\n        throw 'mode:' + mode;\n      }\n\n    } else if (type < 27) {\n\n      // 10 - 26\n\n      switch(mode) {\n      case QRMode.MODE_NUMBER    : return 12;\n      case QRMode.MODE_ALPHA_NUM : return 11;\n      case QRMode.MODE_8BIT_BYTE : return 16;\n      case QRMode.MODE_KANJI     : return 10;\n      default :\n        throw 'mode:' + mode;\n      }\n\n    } else if (type < 41) {\n\n      // 27 - 40\n\n      switch(mode) {\n      case QRMode.MODE_NUMBER    : return 14;\n      case QRMode.MODE_ALPHA_NUM : return 13;\n      case QRMode.MODE_8BIT_BYTE : return 16;\n      case QRMode.MODE_KANJI     : return 12;\n      default :\n        throw 'mode:' + mode;\n      }\n\n    } else {\n      throw 'type:' + type;\n    }\n  };\n\n  _this.getLostPoint = function(qrcode) {\n\n    const moduleCount = qrcode.getModuleCount();\n\n    let lostPoint = 0;\n\n    // LEVEL1\n\n    for (let row = 0; row < moduleCount; row += 1) {\n      for (let col = 0; col < moduleCount; col += 1) {\n\n        let sameCount = 0;\n        const dark = qrcode.isDark(row, col);\n\n        for (let r = -1; r <= 1; r += 1) {\n\n          if (row + r < 0 || moduleCount <= row + r) {\n            continue;\n          }\n\n          for (let c = -1; c <= 1; c += 1) {\n\n            if (col + c < 0 || moduleCount <= col + c) {\n              continue;\n            }\n\n            if (r == 0 && c == 0) {\n              continue;\n            }\n\n            if (dark == qrcode.isDark(row + r, col + c) ) {\n              sameCount += 1;\n            }\n          }\n        }\n\n        if (sameCount > 5) {\n          lostPoint += (3 + sameCount - 5);\n        }\n      }\n    };\n\n    // LEVEL2\n\n    for (let row = 0; row < moduleCount - 1; row += 1) {\n      for (let col = 0; col < moduleCount - 1; col += 1) {\n        let count = 0;\n        if (qrcode.isDark(row, col) ) count += 1;\n        if (qrcode.isDark(row + 1, col) ) count += 1;\n        if (qrcode.isDark(row, col + 1) ) count += 1;\n        if (qrcode.isDark(row + 1, col + 1) ) count += 1;\n        if (count == 0 || count == 4) {\n          lostPoint += 3;\n        }\n      }\n    }\n\n    // LEVEL3\n\n    for (let row = 0; row < moduleCount; row += 1) {\n      for (let col = 0; col < moduleCount - 6; col += 1) {\n        if (qrcode.isDark(row, col)\n            && !qrcode.isDark(row, col + 1)\n            &&  qrcode.isDark(row, col + 2)\n            &&  qrcode.isDark(row, col + 3)\n            &&  qrcode.isDark(row, col + 4)\n            && !qrcode.isDark(row, col + 5)\n            &&  qrcode.isDark(row, col + 6) ) {\n          lostPoint += 40;\n        }\n      }\n    }\n\n    for (let col = 0; col < moduleCount; col += 1) {\n      for (let row = 0; row < moduleCount - 6; row += 1) {\n        if (qrcode.isDark(row, col)\n            && !qrcode.isDark(row + 1, col)\n            &&  qrcode.isDark(row + 2, col)\n            &&  qrcode.isDark(row + 3, col)\n            &&  qrcode.isDark(row + 4, col)\n            && !qrcode.isDark(row + 5, col)\n            &&  qrcode.isDark(row + 6, col) ) {\n          lostPoint += 40;\n        }\n      }\n    }\n\n    // LEVEL4\n\n    let darkCount = 0;\n\n    for (let col = 0; col < moduleCount; col += 1) {\n      for (let row = 0; row < moduleCount; row += 1) {\n        if (qrcode.isDark(row, col) ) {\n          darkCount += 1;\n        }\n      }\n    }\n\n    const ratio = Math.abs(100 * darkCount / moduleCount / moduleCount - 50) / 5;\n    lostPoint += ratio * 10;\n\n    return lostPoint;\n  };\n\n  return _this;\n}();\n\n//---------------------------------------------------------------------\n// QRMath\n//---------------------------------------------------------------------\n\nconst QRMath = function() {\n\n  const EXP_TABLE = new Array(256);\n  const LOG_TABLE = new Array(256);\n\n  // initialize tables\n  for (let i = 0; i < 8; i += 1) {\n    EXP_TABLE[i] = 1 << i;\n  }\n  for (let i = 8; i < 256; i += 1) {\n    EXP_TABLE[i] = EXP_TABLE[i - 4]\n      ^ EXP_TABLE[i - 5]\n      ^ EXP_TABLE[i - 6]\n      ^ EXP_TABLE[i - 8];\n  }\n  for (let i = 0; i < 255; i += 1) {\n    LOG_TABLE[EXP_TABLE[i] ] = i;\n  }\n\n  const _this = {};\n\n  _this.glog = function(n) {\n\n    if (n < 1) {\n      throw 'glog(' + n + ')';\n    }\n\n    return LOG_TABLE[n];\n  };\n\n  _this.gexp = function(n) {\n\n    while (n < 0) {\n      n += 255;\n    }\n\n    while (n >= 256) {\n      n -= 255;\n    }\n\n    return EXP_TABLE[n];\n  };\n\n  return _this;\n}();\n\n//---------------------------------------------------------------------\n// qrPolynomial\n//---------------------------------------------------------------------\n\nconst qrPolynomial = function(num, shift) {\n\n  if (typeof num.length == 'undefined') {\n    throw num.length + '/' + shift;\n  }\n\n  const _num = function() {\n    let offset = 0;\n    while (offset < num.length && num[offset] == 0) {\n      offset += 1;\n    }\n    const _num = new Array(num.length - offset + shift);\n    for (let i = 0; i < num.length - offset; i += 1) {\n      _num[i] = num[i + offset];\n    }\n    return _num;\n  }();\n\n  const _this = {};\n\n  _this.getAt = function(index) {\n    return _num[index];\n  };\n\n  _this.getLength = function() {\n    return _num.length;\n  };\n\n  _this.multiply = function(e) {\n\n    const num = new Array(_this.getLength() + e.getLength() - 1);\n\n    for (let i = 0; i < _this.getLength(); i += 1) {\n      for (let j = 0; j < e.getLength(); j += 1) {\n        num[i + j] ^= QRMath.gexp(QRMath.glog(_this.getAt(i) ) + QRMath.glog(e.getAt(j) ) );\n      }\n    }\n\n    return qrPolynomial(num, 0);\n  };\n\n  _this.mod = function(e) {\n\n    if (_this.getLength() - e.getLength() < 0) {\n      return _this;\n    }\n\n    const ratio = QRMath.glog(_this.getAt(0) ) - QRMath.glog(e.getAt(0) );\n\n    const num = new Array(_this.getLength() );\n    for (let i = 0; i < _this.getLength(); i += 1) {\n      num[i] = _this.getAt(i);\n    }\n\n    for (let i = 0; i < e.getLength(); i += 1) {\n      num[i] ^= QRMath.gexp(QRMath.glog(e.getAt(i) ) + ratio);\n    }\n\n    // recursive call\n    return qrPolynomial(num, 0).mod(e);\n  };\n\n  return _this;\n};\n\n//---------------------------------------------------------------------\n// QRRSBlock\n//---------------------------------------------------------------------\n\nconst QRRSBlock = function() {\n\n  const RS_BLOCK_TABLE = [\n\n    // L\n    // M\n    // Q\n    // H\n\n    // 1\n    [1, 26, 19],\n    [1, 26, 16],\n    [1, 26, 13],\n    [1, 26, 9],\n\n    // 2\n    [1, 44, 34],\n    [1, 44, 28],\n    [1, 44, 22],\n    [1, 44, 16],\n\n    // 3\n    [1, 70, 55],\n    [1, 70, 44],\n    [2, 35, 17],\n    [2, 35, 13],\n\n    // 4\n    [1, 100, 80],\n    [2, 50, 32],\n    [2, 50, 24],\n    [4, 25, 9],\n\n    // 5\n    [1, 134, 108],\n    [2, 67, 43],\n    [2, 33, 15, 2, 34, 16],\n    [2, 33, 11, 2, 34, 12],\n\n    // 6\n    [2, 86, 68],\n    [4, 43, 27],\n    [4, 43, 19],\n    [4, 43, 15],\n\n    // 7\n    [2, 98, 78],\n    [4, 49, 31],\n    [2, 32, 14, 4, 33, 15],\n    [4, 39, 13, 1, 40, 14],\n\n    // 8\n    [2, 121, 97],\n    [2, 60, 38, 2, 61, 39],\n    [4, 40, 18, 2, 41, 19],\n    [4, 40, 14, 2, 41, 15],\n\n    // 9\n    [2, 146, 116],\n    [3, 58, 36, 2, 59, 37],\n    [4, 36, 16, 4, 37, 17],\n    [4, 36, 12, 4, 37, 13],\n\n    // 10\n    [2, 86, 68, 2, 87, 69],\n    [4, 69, 43, 1, 70, 44],\n    [6, 43, 19, 2, 44, 20],\n    [6, 43, 15, 2, 44, 16],\n\n    // 11\n    [4, 101, 81],\n    [1, 80, 50, 4, 81, 51],\n    [4, 50, 22, 4, 51, 23],\n    [3, 36, 12, 8, 37, 13],\n\n    // 12\n    [2, 116, 92, 2, 117, 93],\n    [6, 58, 36, 2, 59, 37],\n    [4, 46, 20, 6, 47, 21],\n    [7, 42, 14, 4, 43, 15],\n\n    // 13\n    [4, 133, 107],\n    [8, 59, 37, 1, 60, 38],\n    [8, 44, 20, 4, 45, 21],\n    [12, 33, 11, 4, 34, 12],\n\n    // 14\n    [3, 145, 115, 1, 146, 116],\n    [4, 64, 40, 5, 65, 41],\n    [11, 36, 16, 5, 37, 17],\n    [11, 36, 12, 5, 37, 13],\n\n    // 15\n    [5, 109, 87, 1, 110, 88],\n    [5, 65, 41, 5, 66, 42],\n    [5, 54, 24, 7, 55, 25],\n    [11, 36, 12, 7, 37, 13],\n\n    // 16\n    [5, 122, 98, 1, 123, 99],\n    [7, 73, 45, 3, 74, 46],\n    [15, 43, 19, 2, 44, 20],\n    [3, 45, 15, 13, 46, 16],\n\n    // 17\n    [1, 135, 107, 5, 136, 108],\n    [10, 74, 46, 1, 75, 47],\n    [1, 50, 22, 15, 51, 23],\n    [2, 42, 14, 17, 43, 15],\n\n    // 18\n    [5, 150, 120, 1, 151, 121],\n    [9, 69, 43, 4, 70, 44],\n    [17, 50, 22, 1, 51, 23],\n    [2, 42, 14, 19, 43, 15],\n\n    // 19\n    [3, 141, 113, 4, 142, 114],\n    [3, 70, 44, 11, 71, 45],\n    [17, 47, 21, 4, 48, 22],\n    [9, 39, 13, 16, 40, 14],\n\n    // 20\n    [3, 135, 107, 5, 136, 108],\n    [3, 67, 41, 13, 68, 42],\n    [15, 54, 24, 5, 55, 25],\n    [15, 43, 15, 10, 44, 16],\n\n    // 21\n    [4, 144, 116, 4, 145, 117],\n    [17, 68, 42],\n    [17, 50, 22, 6, 51, 23],\n    [19, 46, 16, 6, 47, 17],\n\n    // 22\n    [2, 139, 111, 7, 140, 112],\n    [17, 74, 46],\n    [7, 54, 24, 16, 55, 25],\n    [34, 37, 13],\n\n    // 23\n    [4, 151, 121, 5, 152, 122],\n    [4, 75, 47, 14, 76, 48],\n    [11, 54, 24, 14, 55, 25],\n    [16, 45, 15, 14, 46, 16],\n\n    // 24\n    [6, 147, 117, 4, 148, 118],\n    [6, 73, 45, 14, 74, 46],\n    [11, 54, 24, 16, 55, 25],\n    [30, 46, 16, 2, 47, 17],\n\n    // 25\n    [8, 132, 106, 4, 133, 107],\n    [8, 75, 47, 13, 76, 48],\n    [7, 54, 24, 22, 55, 25],\n    [22, 45, 15, 13, 46, 16],\n\n    // 26\n    [10, 142, 114, 2, 143, 115],\n    [19, 74, 46, 4, 75, 47],\n    [28, 50, 22, 6, 51, 23],\n    [33, 46, 16, 4, 47, 17],\n\n    // 27\n    [8, 152, 122, 4, 153, 123],\n    [22, 73, 45, 3, 74, 46],\n    [8, 53, 23, 26, 54, 24],\n    [12, 45, 15, 28, 46, 16],\n\n    // 28\n    [3, 147, 117, 10, 148, 118],\n    [3, 73, 45, 23, 74, 46],\n    [4, 54, 24, 31, 55, 25],\n    [11, 45, 15, 31, 46, 16],\n\n    // 29\n    [7, 146, 116, 7, 147, 117],\n    [21, 73, 45, 7, 74, 46],\n    [1, 53, 23, 37, 54, 24],\n    [19, 45, 15, 26, 46, 16],\n\n    // 30\n    [5, 145, 115, 10, 146, 116],\n    [19, 75, 47, 10, 76, 48],\n    [15, 54, 24, 25, 55, 25],\n    [23, 45, 15, 25, 46, 16],\n\n    // 31\n    [13, 145, 115, 3, 146, 116],\n    [2, 74, 46, 29, 75, 47],\n    [42, 54, 24, 1, 55, 25],\n    [23, 45, 15, 28, 46, 16],\n\n    // 32\n    [17, 145, 115],\n    [10, 74, 46, 23, 75, 47],\n    [10, 54, 24, 35, 55, 25],\n    [19, 45, 15, 35, 46, 16],\n\n    // 33\n    [17, 145, 115, 1, 146, 116],\n    [14, 74, 46, 21, 75, 47],\n    [29, 54, 24, 19, 55, 25],\n    [11, 45, 15, 46, 46, 16],\n\n    // 34\n    [13, 145, 115, 6, 146, 116],\n    [14, 74, 46, 23, 75, 47],\n    [44, 54, 24, 7, 55, 25],\n    [59, 46, 16, 1, 47, 17],\n\n    // 35\n    [12, 151, 121, 7, 152, 122],\n    [12, 75, 47, 26, 76, 48],\n    [39, 54, 24, 14, 55, 25],\n    [22, 45, 15, 41, 46, 16],\n\n    // 36\n    [6, 151, 121, 14, 152, 122],\n    [6, 75, 47, 34, 76, 48],\n    [46, 54, 24, 10, 55, 25],\n    [2, 45, 15, 64, 46, 16],\n\n    // 37\n    [17, 152, 122, 4, 153, 123],\n    [29, 74, 46, 14, 75, 47],\n    [49, 54, 24, 10, 55, 25],\n    [24, 45, 15, 46, 46, 16],\n\n    // 38\n    [4, 152, 122, 18, 153, 123],\n    [13, 74, 46, 32, 75, 47],\n    [48, 54, 24, 14, 55, 25],\n    [42, 45, 15, 32, 46, 16],\n\n    // 39\n    [20, 147, 117, 4, 148, 118],\n    [40, 75, 47, 7, 76, 48],\n    [43, 54, 24, 22, 55, 25],\n    [10, 45, 15, 67, 46, 16],\n\n    // 40\n    [19, 148, 118, 6, 149, 119],\n    [18, 75, 47, 31, 76, 48],\n    [34, 54, 24, 34, 55, 25],\n    [20, 45, 15, 61, 46, 16]\n  ];\n\n  const qrRSBlock = function(totalCount, dataCount) {\n    const _this = {};\n    _this.totalCount = totalCount;\n    _this.dataCount = dataCount;\n    return _this;\n  };\n\n  const _this = {};\n\n  const getRsBlockTable = function(typeNumber, errorCorrectionLevel) {\n\n    switch(errorCorrectionLevel) {\n    case QRErrorCorrectionLevel.L :\n      return RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 0];\n    case QRErrorCorrectionLevel.M :\n      return RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 1];\n    case QRErrorCorrectionLevel.Q :\n      return RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 2];\n    case QRErrorCorrectionLevel.H :\n      return RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 3];\n    default :\n      return undefined;\n    }\n  };\n\n  _this.getRSBlocks = function(typeNumber, errorCorrectionLevel) {\n\n    const rsBlock = getRsBlockTable(typeNumber, errorCorrectionLevel);\n\n    if (typeof rsBlock == 'undefined') {\n      throw 'bad rs block @ typeNumber:' + typeNumber +\n          '/errorCorrectionLevel:' + errorCorrectionLevel;\n    }\n\n    const length = rsBlock.length / 3;\n\n    const list = [];\n\n    for (let i = 0; i < length; i += 1) {\n\n      const count = rsBlock[i * 3 + 0];\n      const totalCount = rsBlock[i * 3 + 1];\n      const dataCount = rsBlock[i * 3 + 2];\n\n      for (let j = 0; j < count; j += 1) {\n        list.push(qrRSBlock(totalCount, dataCount) );\n      }\n    }\n\n    return list;\n  };\n\n  return _this;\n}();\n\n//---------------------------------------------------------------------\n// qrBitBuffer\n//---------------------------------------------------------------------\n\nconst qrBitBuffer = function() {\n\n  const _buffer = [];\n  let _length = 0;\n\n  const _this = {};\n\n  _this.getBuffer = function() {\n    return _buffer;\n  };\n\n  _this.getAt = function(index) {\n    const bufIndex = Math.floor(index / 8);\n    return ( (_buffer[bufIndex] >>> (7 - index % 8) ) & 1) == 1;\n  };\n\n  _this.put = function(num, length) {\n    for (let i = 0; i < length; i += 1) {\n      _this.putBit( ( (num >>> (length - i - 1) ) & 1) == 1);\n    }\n  };\n\n  _this.getLengthInBits = function() {\n    return _length;\n  };\n\n  _this.putBit = function(bit) {\n\n    const bufIndex = Math.floor(_length / 8);\n    if (_buffer.length <= bufIndex) {\n      _buffer.push(0);\n    }\n\n    if (bit) {\n      _buffer[bufIndex] |= (0x80 >>> (_length % 8) );\n    }\n\n    _length += 1;\n  };\n\n  return _this;\n};\n\n//---------------------------------------------------------------------\n// qrNumber\n//---------------------------------------------------------------------\n\nconst qrNumber = function(data) {\n\n  const _mode = QRMode.MODE_NUMBER;\n  const _data = data;\n\n  const _this = {};\n\n  _this.getMode = function() {\n    return _mode;\n  };\n\n  _this.getLength = function(buffer) {\n    return _data.length;\n  };\n\n  _this.write = function(buffer) {\n\n    const data = _data;\n\n    let i = 0;\n\n    while (i + 2 < data.length) {\n      buffer.put(strToNum(data.substring(i, i + 3) ), 10);\n      i += 3;\n    }\n\n    if (i < data.length) {\n      if (data.length - i == 1) {\n        buffer.put(strToNum(data.substring(i, i + 1) ), 4);\n      } else if (data.length - i == 2) {\n        buffer.put(strToNum(data.substring(i, i + 2) ), 7);\n      }\n    }\n  };\n\n  const strToNum = function(s) {\n    let num = 0;\n    for (let i = 0; i < s.length; i += 1) {\n      num = num * 10 + chatToNum(s.charAt(i) );\n    }\n    return num;\n  };\n\n  const chatToNum = function(c) {\n    if ('0' <= c && c <= '9') {\n      return c.charCodeAt(0) - '0'.charCodeAt(0);\n    }\n    throw 'illegal char :' + c;\n  };\n\n  return _this;\n};\n\n//---------------------------------------------------------------------\n// qrAlphaNum\n//---------------------------------------------------------------------\n\nconst qrAlphaNum = function(data) {\n\n  const _mode = QRMode.MODE_ALPHA_NUM;\n  const _data = data;\n\n  const _this = {};\n\n  _this.getMode = function() {\n    return _mode;\n  };\n\n  _this.getLength = function(buffer) {\n    return _data.length;\n  };\n\n  _this.write = function(buffer) {\n\n    const s = _data;\n\n    let i = 0;\n\n    while (i + 1 < s.length) {\n      buffer.put(\n        getCode(s.charAt(i) ) * 45 +\n        getCode(s.charAt(i + 1) ), 11);\n      i += 2;\n    }\n\n    if (i < s.length) {\n      buffer.put(getCode(s.charAt(i) ), 6);\n    }\n  };\n\n  const getCode = function(c) {\n\n    if ('0' <= c && c <= '9') {\n      return c.charCodeAt(0) - '0'.charCodeAt(0);\n    } else if ('A' <= c && c <= 'Z') {\n      return c.charCodeAt(0) - 'A'.charCodeAt(0) + 10;\n    } else {\n      switch (c) {\n      case '\\u0020' : return 36;\n      case '$' : return 37;\n      case '%' : return 38;\n      case '*' : return 39;\n      case '+' : return 40;\n      case '-' : return 41;\n      case '.' : return 42;\n      case '/' : return 43;\n      case ':' : return 44;\n      default :\n        throw 'illegal char :' + c;\n      }\n    }\n  };\n\n  return _this;\n};\n\n//---------------------------------------------------------------------\n// qr8BitByte\n//---------------------------------------------------------------------\n\nconst qr8BitByte = function(data) {\n\n  const _mode = QRMode.MODE_8BIT_BYTE;\n  const _data = data;\n  const _bytes = qrcode.stringToBytes(data);\n\n  const _this = {};\n\n  _this.getMode = function() {\n    return _mode;\n  };\n\n  _this.getLength = function(buffer) {\n    return _bytes.length;\n  };\n\n  _this.write = function(buffer) {\n    for (let i = 0; i < _bytes.length; i += 1) {\n      buffer.put(_bytes[i], 8);\n    }\n  };\n\n  return _this;\n};\n\n//---------------------------------------------------------------------\n// qrKanji\n//---------------------------------------------------------------------\n\nconst qrKanji = function(data) {\n\n  const _mode = QRMode.MODE_KANJI;\n  const _data = data;\n\n  const stringToBytes = qrcode.stringToBytes;\n  !function(c, code) {\n    // self test for sjis support.\n    const test = stringToBytes(c);\n    if (test.length != 2 || ( (test[0] << 8) | test[1]) != code) {\n      throw 'sjis not supported.';\n    }\n  }('\\u53cb', 0x9746);\n\n  const _bytes = stringToBytes(data);\n\n  const _this = {};\n\n  _this.getMode = function() {\n    return _mode;\n  };\n\n  _this.getLength = function(buffer) {\n    return ~~(_bytes.length / 2);\n  };\n\n  _this.write = function(buffer) {\n\n    const data = _bytes;\n\n    let i = 0;\n\n    while (i + 1 < data.length) {\n\n      let c = ( (0xff & data[i]) << 8) | (0xff & data[i + 1]);\n\n      if (0x8140 <= c && c <= 0x9FFC) {\n        c -= 0x8140;\n      } else if (0xE040 <= c && c <= 0xEBBF) {\n        c -= 0xC140;\n      } else {\n        throw 'illegal char at ' + (i + 1) + '/' + c;\n      }\n\n      c = ( (c >>> 8) & 0xff) * 0xC0 + (c & 0xff);\n\n      buffer.put(c, 13);\n\n      i += 2;\n    }\n\n    if (i < data.length) {\n      throw 'illegal char at ' + (i + 1);\n    }\n  };\n\n  return _this;\n};\n\n//=====================================================================\n// GIF Support etc.\n//\n\n//---------------------------------------------------------------------\n// byteArrayOutputStream\n//---------------------------------------------------------------------\n\nconst byteArrayOutputStream = function() {\n\n  const _bytes = [];\n\n  const _this = {};\n\n  _this.writeByte = function(b) {\n    _bytes.push(b & 0xff);\n  };\n\n  _this.writeShort = function(i) {\n    _this.writeByte(i);\n    _this.writeByte(i >>> 8);\n  };\n\n  _this.writeBytes = function(b, off, len) {\n    off = off || 0;\n    len = len || b.length;\n    for (let i = 0; i < len; i += 1) {\n      _this.writeByte(b[i + off]);\n    }\n  };\n\n  _this.writeString = function(s) {\n    for (let i = 0; i < s.length; i += 1) {\n      _this.writeByte(s.charCodeAt(i) );\n    }\n  };\n\n  _this.toByteArray = function() {\n    return _bytes;\n  };\n\n  _this.toString = function() {\n    let s = '';\n    s += '[';\n    for (let i = 0; i < _bytes.length; i += 1) {\n      if (i > 0) {\n        s += ',';\n      }\n      s += _bytes[i];\n    }\n    s += ']';\n    return s;\n  };\n\n  return _this;\n};\n\n//---------------------------------------------------------------------\n// base64EncodeOutputStream\n//---------------------------------------------------------------------\n\nconst base64EncodeOutputStream = function() {\n\n  let _buffer = 0;\n  let _buflen = 0;\n  let _length = 0;\n  let _base64 = '';\n\n  const _this = {};\n\n  const writeEncoded = function(b) {\n    _base64 += String.fromCharCode(encode(b & 0x3f) );\n  };\n\n  const encode = function(n) {\n    if (n < 0) {\n      throw 'n:' + n;\n    } else if (n < 26) {\n      return 0x41 + n;\n    } else if (n < 52) {\n      return 0x61 + (n - 26);\n    } else if (n < 62) {\n      return 0x30 + (n - 52);\n    } else if (n == 62) {\n      return 0x2b;\n    } else if (n == 63) {\n      return 0x2f;\n    } else {\n      throw 'n:' + n;\n    }\n  };\n\n  _this.writeByte = function(n) {\n\n    _buffer = (_buffer << 8) | (n & 0xff);\n    _buflen += 8;\n    _length += 1;\n\n    while (_buflen >= 6) {\n      writeEncoded(_buffer >>> (_buflen - 6) );\n      _buflen -= 6;\n    }\n  };\n\n  _this.flush = function() {\n\n    if (_buflen > 0) {\n      writeEncoded(_buffer << (6 - _buflen) );\n      _buffer = 0;\n      _buflen = 0;\n    }\n\n    if (_length % 3 != 0) {\n      // padding\n      const padlen = 3 - _length % 3;\n      for (let i = 0; i < padlen; i += 1) {\n        _base64 += '=';\n      }\n    }\n  };\n\n  _this.toString = function() {\n    return _base64;\n  };\n\n  return _this;\n};\n\n//---------------------------------------------------------------------\n// base64DecodeInputStream\n//---------------------------------------------------------------------\n\nconst base64DecodeInputStream = function(str) {\n\n  const _str = str;\n  let _pos = 0;\n  let _buffer = 0;\n  let _buflen = 0;\n\n  const _this = {};\n\n  _this.read = function() {\n\n    while (_buflen < 8) {\n\n      if (_pos >= _str.length) {\n        if (_buflen == 0) {\n          return -1;\n        }\n        throw 'unexpected end of file./' + _buflen;\n      }\n\n      const c = _str.charAt(_pos);\n      _pos += 1;\n\n      if (c == '=') {\n        _buflen = 0;\n        return -1;\n      } else if (c.match(/^\\s$/) ) {\n        // ignore if whitespace.\n        continue;\n      }\n\n      _buffer = (_buffer << 6) | decode(c.charCodeAt(0) );\n      _buflen += 6;\n    }\n\n    const n = (_buffer >>> (_buflen - 8) ) & 0xff;\n    _buflen -= 8;\n    return n;\n  };\n\n  const decode = function(c) {\n    if (0x41 <= c && c <= 0x5a) {\n      return c - 0x41;\n    } else if (0x61 <= c && c <= 0x7a) {\n      return c - 0x61 + 26;\n    } else if (0x30 <= c && c <= 0x39) {\n      return c - 0x30 + 52;\n    } else if (c == 0x2b) {\n      return 62;\n    } else if (c == 0x2f) {\n      return 63;\n    } else {\n      throw 'c:' + c;\n    }\n  };\n\n  return _this;\n};\n\n//---------------------------------------------------------------------\n// gifImage (B/W)\n//---------------------------------------------------------------------\n\nconst gifImage = function(width, height) {\n\n  const _width = width;\n  const _height = height;\n  const _data = new Array(width * height);\n\n  const _this = {};\n\n  _this.setPixel = function(x, y, pixel) {\n    _data[y * _width + x] = pixel;\n  };\n\n  _this.write = function(out) {\n\n    //---------------------------------\n    // GIF Signature\n\n    out.writeString('GIF87a');\n\n    //---------------------------------\n    // Screen Descriptor\n\n    out.writeShort(_width);\n    out.writeShort(_height);\n\n    out.writeByte(0x80); // 2bit\n    out.writeByte(0);\n    out.writeByte(0);\n\n    //---------------------------------\n    // Global Color Map\n\n    // black\n    out.writeByte(0x00);\n    out.writeByte(0x00);\n    out.writeByte(0x00);\n\n    // white\n    out.writeByte(0xff);\n    out.writeByte(0xff);\n    out.writeByte(0xff);\n\n    //---------------------------------\n    // Image Descriptor\n\n    out.writeString(',');\n    out.writeShort(0);\n    out.writeShort(0);\n    out.writeShort(_width);\n    out.writeShort(_height);\n    out.writeByte(0);\n\n    //---------------------------------\n    // Local Color Map\n\n    //---------------------------------\n    // Raster Data\n\n    const lzwMinCodeSize = 2;\n    const raster = getLZWRaster(lzwMinCodeSize);\n\n    out.writeByte(lzwMinCodeSize);\n\n    let offset = 0;\n\n    while (raster.length - offset > 255) {\n      out.writeByte(255);\n      out.writeBytes(raster, offset, 255);\n      offset += 255;\n    }\n\n    out.writeByte(raster.length - offset);\n    out.writeBytes(raster, offset, raster.length - offset);\n    out.writeByte(0x00);\n\n    //---------------------------------\n    // GIF Terminator\n    out.writeString(';');\n  };\n\n  const bitOutputStream = function(out) {\n\n    const _out = out;\n    let _bitLength = 0;\n    let _bitBuffer = 0;\n\n    const _this = {};\n\n    _this.write = function(data, length) {\n\n      if ( (data >>> length) != 0) {\n        throw 'length over';\n      }\n\n      while (_bitLength + length >= 8) {\n        _out.writeByte(0xff & ( (data << _bitLength) | _bitBuffer) );\n        length -= (8 - _bitLength);\n        data >>>= (8 - _bitLength);\n        _bitBuffer = 0;\n        _bitLength = 0;\n      }\n\n      _bitBuffer = (data << _bitLength) | _bitBuffer;\n      _bitLength = _bitLength + length;\n    };\n\n    _this.flush = function() {\n      if (_bitLength > 0) {\n        _out.writeByte(_bitBuffer);\n      }\n    };\n\n    return _this;\n  };\n\n  const getLZWRaster = function(lzwMinCodeSize) {\n\n    const clearCode = 1 << lzwMinCodeSize;\n    const endCode = (1 << lzwMinCodeSize) + 1;\n    let bitLength = lzwMinCodeSize + 1;\n\n    // Setup LZWTable\n    const table = lzwTable();\n\n    for (let i = 0; i < clearCode; i += 1) {\n      table.add(String.fromCharCode(i) );\n    }\n    table.add(String.fromCharCode(clearCode) );\n    table.add(String.fromCharCode(endCode) );\n\n    const byteOut = byteArrayOutputStream();\n    const bitOut = bitOutputStream(byteOut);\n\n    // clear code\n    bitOut.write(clearCode, bitLength);\n\n    let dataIndex = 0;\n\n    let s = String.fromCharCode(_data[dataIndex]);\n    dataIndex += 1;\n\n    while (dataIndex < _data.length) {\n\n      const c = String.fromCharCode(_data[dataIndex]);\n      dataIndex += 1;\n\n      if (table.contains(s + c) ) {\n\n        s = s + c;\n\n      } else {\n\n        bitOut.write(table.indexOf(s), bitLength);\n\n        if (table.size() < 0xfff) {\n\n          if (table.size() == (1 << bitLength) ) {\n            bitLength += 1;\n          }\n\n          table.add(s + c);\n        }\n\n        s = c;\n      }\n    }\n\n    bitOut.write(table.indexOf(s), bitLength);\n\n    // end code\n    bitOut.write(endCode, bitLength);\n\n    bitOut.flush();\n\n    return byteOut.toByteArray();\n  };\n\n  const lzwTable = function() {\n\n    const _map = {};\n    let _size = 0;\n\n    const _this = {};\n\n    _this.add = function(key) {\n      if (_this.contains(key) ) {\n        throw 'dup key:' + key;\n      }\n      _map[key] = _size;\n      _size += 1;\n    };\n\n    _this.size = function() {\n      return _size;\n    };\n\n    _this.indexOf = function(key) {\n      return _map[key];\n    };\n\n    _this.contains = function(key) {\n      return typeof _map[key] != 'undefined';\n    };\n\n    return _this;\n  };\n\n  return _this;\n};\n\nconst createDataURL = function(width, height, getPixel) {\n  const gif = gifImage(width, height);\n  for (let y = 0; y < height; y += 1) {\n    for (let x = 0; x < width; x += 1) {\n      gif.setPixel(x, y, getPixel(x, y) );\n    }\n  }\n\n  const b = byteArrayOutputStream();\n  gif.write(b);\n\n  const base64 = base64EncodeOutputStream();\n  const bytes = b.toByteArray();\n  for (let i = 0; i < bytes.length; i += 1) {\n    base64.writeByte(bytes[i]);\n  }\n  base64.flush();\n\n  return 'data:image/gif;base64,' + base64;\n};\n\nexport default qrcode;\n\nexport const stringToBytes = qrcode.stringToBytes;\n", "import QRCode from \"qrcode-generator\";\n\n// Copy from qrcode-generator types\ntype TypeNumber =\n  | 0 // Automatic type number\n  | 1\n  | 2\n  | 3\n  | 4\n  | 5\n  | 6\n  | 7\n  | 8\n  | 9\n  | 10\n  | 11\n  | 12\n  | 13\n  | 14\n  | 15\n  | 16\n  | 17\n  | 18\n  | 19\n  | 20\n  | 21\n  | 22\n  | 23\n  | 24\n  | 25\n  | 26\n  | 27\n  | 28\n  | 29\n  | 30\n  | 31\n  | 32\n  | 33\n  | 34\n  | 35\n  | 36\n  | 37\n  | 38\n  | 39\n  | 40;\n\ntype ErrorCorrectionLevel = \"L\" | \"M\" | \"Q\" | \"H\";\n\ntype Mode = \"Numeric\" | \"Alphanumeric\" | \"Byte\" /* Default */ | \"Kanji\";\n\ninterface QRCodeOptions {\n  typeNumber?: TypeNumber;\n  errorCorrectionLevel?: ErrorCorrectionLevel;\n  cellSize?: number;\n  margin?: number;\n  mode?: Mode;\n}\n\nfunction makeQR(\n  text: string,\n  options?: QRCodeOptions,\n): string {\n  const {\n    typeNumber = 4,\n    errorCorrectionLevel = \"L\",\n    cellSize = 3,\n    margin,\n    mode,\n  } = options ?? {};\n  const qr = QRCode(typeNumber, errorCorrectionLevel);\n  qr.addData(text, mode);\n  qr.make();\n  return qr.createImgTag(cellSize, margin);\n}\n\ntype Widget = {\n  _isWidget: true;\n  html: string;\n};\n\nexport function qrcode(\n  text: string,\n  options?: QRCodeOptions,\n): Widget {\n  return {\n    _isWidget: true,\n    html: makeQR(text, options),\n  };\n}\n", "\nimport { setupMessageListener } from \"https://deno.land/x/silverbullet@2.3.0/client/plugos/worker_runtime.ts\";\n\n// Imports\nimport {qrcode as qrcode} from \"file:///home/utherpally/m/wujing/silverbullet/plugs/bulletqr/bulletqr.ts\";\n\n\n// Function mapping\nconst functionMapping = {\n  qrcode: qrcode,\n\n};\n\n// Manifest\nconst manifest = {\n  \"name\": \"bulletqr\",\n  \"functions\": {\n    \"qrcode\": {\n      \"path\": \"bulletqr.ts:qrcode\",\n      \"syscall\": \"bulletqr.qrcode\"\n    }\n  },\n  \"assets\": {}\n};\n\nexport const plug = {manifest, functionMapping};\n\nsetupMessageListener(functionMapping, manifest, self.postMessage);\n"],
  "mappings": "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",
  "names": ["base64Decode", "s", "binString", "len", "bytes", "i", "base64Encode", "buffer", "binary", "fixedCounter", "Logger", "prefix", "maxCaptureSize", "createPatchedMethod", "level", "args", "prefixedArgs", "entry", "arg", "logEndpoint", "source", "logCopy", "e", "globalLogger", "initLogger", "workerPostMessage", "_msg", "runningAsWebWorker", "pendingRequests", "syscallReqId", "name", "args", "resolve", "reject", "setupMessageListener", "functionMapping", "manifest", "postMessageFn", "event", "data", "fn", "result", "syscallId", "lookup", "initLogger", "sandboxFetch", "reqInfo", "options", "body", "encodedBody", "base64Encode", "monkeyPatchFetch", "init", "base64Decode", "qrcode", "typeNumber", "errorCorrectionLevel", "_typeNumber", "_errorCorrectionLevel", "QRErrorCorrectionLevel", "_modules", "_moduleCount", "_dataCache", "_dataList", "_this", "makeImpl", "test", "maskPattern", "moduleCount", "modules", "row", "col", "setupPositionProbePattern", "setupPositionAdjustPattern", "setupTimingPattern", "setupTypeInfo", "setupTypeNumber", "createData", "mapData", "r", "getBestMaskPattern", "minLostPoint", "pattern", "i", "lostPoint", "QRUtil", "c", "pos", "j", "bits", "mod", "data", "inc", "bitIndex", "byteIndex", "maskFunc", "dark", "createBytes", "buffer", "rsBlocks", "offset", "maxDcCount", "maxEcCount", "dcdata", "ecdata", "dcCount", "ecCount", "rsPoly", "modPoly", "qrPolynomial", "modIndex", "totalCodeCount", "index", "dataList", "QRRSBlock", "qrBitBuffer", "totalDataCount", "mode", "newData", "qrNumber", "qrAlphaNum", "qr8BitByte", "qrKanji", "cellSize", "margin", "qrHtml", "alt", "title", "opts", "size", "mc", "mr", "qrSvg", "rect", "escapeXml", "min", "max", "createDataURL", "x", "y", "img", "escaped", "_createHalfASCII", "r1", "r2", "p", "blocks", "blocksLastLineNoMargin", "ascii", "white", "black", "line", "context", "length", "s", "bytes", "unicodeData", "numChars", "unicodeMap", "bin", "base64DecodeInputStream", "read", "b", "count", "b0", "b1", "b2", "b3", "k", "v", "unknownChar", "QRMode", "QRMaskPattern", "PATTERN_POSITION_TABLE", "G15", "G18", "G15_MASK", "getBCHDigit", "digit", "d", "errorCorrectLength", "a", "QRMath", "type", "sameCount", "darkCount", "ratio", "EXP_TABLE", "LOG_TABLE", "n", "num", "shift", "_num", "e", "RS_BLOCK_TABLE", "qrRSBlock", "totalCount", "dataCount", "getRsBlockTable", "rsBlock", "list", "_buffer", "_length", "bufIndex", "bit", "_mode", "_data", "strToNum", "chatToNum", "getCode", "_bytes", "stringToBytes", "code", "byteArrayOutputStream", "off", "len", "base64EncodeOutputStream", "_buflen", "_base64", "writeEncoded", "encode", "padlen", "str", "_str", "_pos", "decode", "gifImage", "width", "height", "_width", "_height", "pixel", "out", "lzwMinCodeSize", "raster", "getLZWRaster", "bitOutputStream", "_out", "_bitLength", "_bitBuffer", "clearCode", "endCode", "bitLength", "table", "lzwTable", "byteOut", "bitOut", "dataIndex", "_map", "_size", "key", "getPixel", "gif", "base64", "qrcode_default", "makeQR", "text", "options", "typeNumber", "errorCorrectionLevel", "cellSize", "margin", "mode", "qr", "qrcode_default", "qrcode", "functionMapping", "qrcode", "manifest", "plug", "setupMessageListener"]
}
